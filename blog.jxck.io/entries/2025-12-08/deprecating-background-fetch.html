<!DOCTYPE html>
<html lang=ja>
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
  <meta charset=utf-8>
  <meta name=viewport content="width=device-width,initial-scale=1">

  <link rel=author    href=https://jxck.io/humans.txt>
  <link rel=manifest  href=/manifest.webmanifest>
  <link rel=alternate href=/feeds/atom.xml type=application/atom+xml title=blog.jxck.io>
  <link rel=canonical href=https://blog.jxck.io/entries/2025-12-08/deprecating-background-fetch.html>

  <link rel=preload as=script href=https://www.jxck.io/assets/js/prism.js?250306_012045>
  <link rel=preload as=script href=https://www.jxck.io/assets/js/main.js?250125_005305>

  <script defer src=https://www.jxck.io/assets/js/prism.js?250306_012045></script>
  <script defer src=https://www.jxck.io/assets/js/main.js?250125_005305></script>

  <link rel=icon type=image/svg+xml sizes=any href=https://blog.jxck.io/assets/img/jxck.svg>
  <link rel=icon type=image/png sizes=120x120 href=https://blog.jxck.io/assets/img/jxck.120x120.png>
  <link rel=icon type=image/png sizes=300x300 href=https://blog.jxck.io/assets/img/jxck.300x300.png>
  <link rel=icon type=image/png sizes=600x600 href=https://blog.jxck.io/assets/img/jxck.600x600.png>
  <link rel=icon type=image/png sizes=1200x1200 href=https://blog.jxck.io/assets/img/jxck.1200x1200.png>
  <link rel=icon type=image/png sizes=3000x3000 href=https://blog.jxck.io/assets/img/jxck.3000x3000.png>

  <link rel=icon type=image/webp sizes=120x120 href=https://blog.jxck.io/assets/img/jxck.120x120.webp>
  <link rel=icon type=image/webp sizes=300x300 href=https://blog.jxck.io/assets/img/jxck.300x300.webp>
  <link rel=icon type=image/webp sizes=600x600 href=https://blog.jxck.io/assets/img/jxck.600x600.webp>
  <link rel=icon type=image/webp sizes=1200x1200 href=https://blog.jxck.io/assets/img/jxck.1200x1200.webp>
  <link rel=icon type=image/webp sizes=3000x3000 href=https://blog.jxck.io/assets/img/jxck.3000x3000.webp>

  <link rel=apple-touch-icon type=image/png sizes=120x120 href=https://blog.jxck.io/assets/img/jxck.120x120.png>
  <link rel=apple-touch-icon type=image/png sizes=300x300 href=https://blog.jxck.io/assets/img/jxck.300x300.png>
  <link rel=apple-touch-icon type=image/png sizes=600x600 href=https://blog.jxck.io/assets/img/jxck.600x600.png>
  <link rel=apple-touch-icon type=image/png sizes=1200x1200 href=https://blog.jxck.io/assets/img/jxck.1200x1200.png>
  <link rel=apple-touch-icon type=image/png sizes=3000x3000 href=https://blog.jxck.io/assets/img/jxck.3000x3000.png>

  <link rel=apple-touch-icon type=image/webp sizes=120x120 href=https://blog.jxck.io/assets/img/jxck.120x120.webp>
  <link rel=apple-touch-icon type=image/webp sizes=300x300 href=https://blog.jxck.io/assets/img/jxck.300x300.webp>
  <link rel=apple-touch-icon type=image/webp sizes=600x600 href=https://blog.jxck.io/assets/img/jxck.600x600.webp>
  <link rel=apple-touch-icon type=image/webp sizes=1200x1200 href=https://blog.jxck.io/assets/img/jxck.1200x1200.webp>
  <link rel=apple-touch-icon type=image/webp sizes=3000x3000 href=https://blog.jxck.io/assets/img/jxck.3000x3000.webp>

  <meta name=author              content=Jxck>
  <meta name=description         content="「Background Fetch を使っているのが、世界であなたのサイトだけなんだけど、この機能消しても良い?」と、TPAC 2025 の会場で、Chrome の Service Worker チームの開発者と話していた際に言われた。">
  <meta name=keywords            content="background fetch,pwa">
  <meta name=theme-color         content=#000000>

  <meta property=og:type         content=article>
  <meta property=og:url          content=https://blog.jxck.io/entries/2025-12-08/deprecating-background-fetch.html>
  <meta property=og:title        content="Background Fetch API が消えそうだった話 | blog.jxck.io">
  <meta property=og:site_name    content=blog.jxck.io>
  <meta property=og:description  content="「Background Fetch を使っているのが、世界であなたのサイトだけなんだけど、この機能消しても良い?」と、TPAC 2025 の会場で、Chrome の Service Worker チームの開発者と話していた際に言われた。">
  <meta property=og:image        content=https://blog.jxck.io/assets/img/jxck.600x600.png>

  <meta name="Hatena::Bookmark" content="nocomment">
  <link rel="author" href="http://www.hatena.ne.jp/Jxck/" />


  <script type=application/ld+json>
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage":{
      "@type":"WebPage",
      "@id":"https://blog.jxck.io"
    },
    "headline": "Background Fetch API が消えそうだった話 | blog.jxck.io",
    "image": [
      "https://www.jxck.io/assets/img/jxck.png",
      "https://logo.jxck.io/jxck.1200x1200.png"
    ],
    "datePublished": "2025-12-08T08:00:00+08:00",
    "dateModified": "2025-12-10T08:00:00+08:00",
    "author": {
      "@type": "Person",
      "name": "Jxck",
      "image": "https://blog.jxck.io/assets/img/jxck.png"
    },
    "publisher": {
      "@type": "Organization",
      "name": "Jxck",
      "logo": {
        "@type": "ImageObject",
        "url": "https://logo.jxck.io/jxck.120x120.png",
        "height": 120,
        "width": 120
      }
    },
    "description": "「Background Fetch を使っているのが、世界であなたのサイトだけなんだけど、この機能消しても良い?」と、TPAC 2025 の会場で、Chrome の Service Worker チームの開発者と話していた際に言われた。"
  }
  </script>

  <title>Background Fetch API が消えそうだった話 | blog.jxck.io</title>
  <link rel=stylesheet property=stylesheet type=text/css href=https://www.jxck.io/assets/css/body.css?250126_044049>
</head>
<body>
  <link rel=stylesheet property=stylesheet type=text/css href=https://www.jxck.io/assets/css/header.css?250125_021259>
  <header>
    <nav>
      <ul>
        <li><a href=https://blog.jxck.io      ><img width=30 height=30 loading=eager src=https://www.jxck.io/assets/img/blog.svg?160301_215351   title=blog   alt="blog logo" class=logo></a>
        <li><a href=/search                   ><img width=30 height=30 loading=eager src=https://www.jxck.io/assets/img/search.svg?190421_130410 title=search alt=search></a>
        <li><a href=.                         ><img width=30 height=30 loading=eager src=https://www.jxck.io/assets/img/up.svg?160831_002319     title=up     alt="move to parent directory"></a>
        <li><a href=/feeds/atom.xml           ><img width=30 height=30 loading=eager src=https://www.jxck.io/assets/img/rss.svg?160227_124312    title=rss    alt="rss feed"></a>
        <li><a href=https://jxck.io/humans.txt><img width=30 height=30 loading=eager src=https://www.jxck.io/assets/img/humans.svg?160831_002319 title=humans alt=huamns.txt></a>
        <li><a href=https://jxck.io           ><img width=30 height=30 loading=eager src=https://www.jxck.io/assets/img/jxck.svg?190123_200004   title=jxck   alt="jxck logo" class=logo></a>
      </ul>
    </nav>
  </header>

  <link rel=stylesheet property=stylesheet type=text/css href=https://www.jxck.io/assets/css/markdown.css?250125_021828>
  <link rel=stylesheet property=stylesheet type=text/css href=https://www.jxck.io/assets/css/main.css?250125_022022>
  <main>
    <link rel=stylesheet property=stylesheet type=text/css href=https://www.jxck.io/assets/css/info.css?250125_014450>
    <dl class=info>
      <div><dt>created_at</dt><dd><time class=created_at datetime=2025-12-08>2025-12-08</time></dd></div>
      <div><dt>updated_at</dt><dd><time class=updated_at datetime=2025-12-10>2025-12-10</time></dd></div>
      <div>
        <dt>tags</dt>
        <dd>
          <nav class=tags>
            <ul>
              <li><a href="/tags#background%20fetch">background fetch</a>
              <li><a href="/tags#pwa">pwa</a>
            </ul>
          </nav>
        </dd>
      </div>
      <div>
        <dt>toc</dt>
        <dd>
          <button popovertarget="toc">open</button>
          <nav id=toc popover=manual>
            <h2>ToC</h2>
            <button popovertarget="toc" popovertargetaction="hide">❌</button>
            <ol>
              <li><a href="#intro">Intro</a>
              <li><a href="#background-fetch">Background Fetch</a>
              <li><a href="#deprecate-background-fetch">Deprecate Background Fetch</a>
              <li><a href="#intent-to-deprecate">Intent to Deprecate</a>
              <li><a href="#feedback">Feedback</a>
              <li><a href="#outro">Outro</a>
            </ol>
          </nav>
        </dd>
      </div>
    </dl>

    <link rel=stylesheet property=stylesheet type=text/css href=https://www.jxck.io/assets/css/article.css?250125_013946>
    <article>
      <h1><a href="">Background Fetch API が消えそうだった話</a></h1>
      <section>
        <h2 id="intro"><a href="#intro">Intro</a></h2>
        <p>「Background Fetch を使っているのが、世界であなたのサイトだけなんだけど、この機能消しても良い?」
        <p>と、TPAC 2025 の会場で、Chrome の Service Worker チームの開発者と話していた際に言われた。
      </section>
      <section>
        <h2 id="background-fetch"><a href="#background-fetch">Background Fetch</a></h2>
        <p>Background Fetch は、Service Worker を使って、文字通り Fetch をバックグラウンドで行う機能だ。
        <p>特に Android では、ダウンロードの UI にプログレスが表示され、終わったら Cache API に保存されます。
        <p>筆者が運営している mozaic.fm のサイトは、Podcast アプリと同じようなことを Web でもできるように PWA 化し、様々な機能を試していた。
        <ul>
          <li>PWA: モバイルでインストールしてアプリとして使える
          <li>Background Fetch: エピソードをダウンロードしておく
          <li>Cache API: オフラインでも聴ける
          <li>Periodic Background Sync: RSS を定期的に取得し、最新エピソードを更新する
          <li>Badge API: 最新エピソードにバッジを表示する
          <li>Content Index: キャッシュしたエピソード一覧を表示する
          <li>Media Session API: ネイティブで音量調節や早送り UI を提供する
          <li>etc
        </ul>
        <p>この頃 PWA で追加された機能は、こうしたユースケースをサポートするものだったので、そのナラティブに則って、自分のサイトで試していたものだ。
        <ul>
          <li>
            mozaic.fm v3 リリースと Podcast の PWA 化 | blog.jxck.io
            <ul>
              <li><a href="https://blog.jxck.io/entries/2020-05-06/mozaic-v3-release.html">https://blog.jxck.io/entries/2020-05-06/mozaic-v3-release.html</a>
            </ul>
          </li>
          <li>
            Podcast over PWA
            <ul>
              <li><a href="https://speakerdeck.com/jxck/podcast-over-pwa" target=_blank>https://speakerdeck.com/jxck/podcast-over-pwa</a>
            </ul>
          </li>
        </ul>
        <p>ところが Android でしか動かないものばかりで、筆者は当時 Android を持っていなかった。そこで、借りた古い Android でデバッグしながら実装し、その端末のアップデートが止まって以降、自分でもまったく試していない機能でもあったた。去年のサイト刷新で一時的に UI を落としたので、試すこともできない状態のはずだ。
      </section>
      <section>
        <h2 id="deprecate-background-fetch"><a href="#deprecate-background-fetch">Deprecate Background Fetch</a></h2>
        <p>そんな実装をしてから数年、先日の TPAC の会場で Chrome の開発者と話していると「ところで、会ったら聞こうと思ってたんですが」と、冒頭の話になった。
        <p>当時、PWA に追加された野心的な機能のいくつかは、様々な事情で問題になっているらしい。他のブラウザも実装していないし、Chrome でも使っている人が少ない。その上で、メンテナンスコストが高く、場合によってはセキュリティ上の問題に発展しうる。消せるなら消したい、というものだ。
        <p>この場合問題になるのは「既存の Web への影響」だ。今まで動いていたサイトが壊れるなら、それは避けるべき問題となる。よほど無視できるほど小さい usage でない限り、基本的に消すことはできない。
        <p>「この機能を使っているのが、世界であなたのサイトだけなんだけど」
        <p>Chrome はテレメトリを収集し、機能ごとの Usage を集計して、Chrome Platform Status で公開している。単に文字列を解析してヒットした、などではなく、実際に呼び出された回数などをもとにしているはずなので、「呼び出すコードがライブラリなどに混ざっているが、実際には呼ばれていない」といったものは省いて、本当に使っているサイトだけがヒットしているはずだ。
        <p>ここで Background Fetch を見ると以下の通りだ。
        <ul>
          <li>
            Chrome Platform Status
            <ul>
              <li><a href="https://cr-status.appspot.com/metrics/feature/timeline/popularity/2550" target=_blank>https://cr-status.appspot.com/metrics/feature/timeline/popularity/2550</a>
            </ul>
          </li>
        </ul>
        <p>
          <picture>
            <source type=image/avif srcset=background-fetch-usage.avif?251208_230839>
            <source type=image/webp srcset=background-fetch-usage.webp?251208_230839>
            <img loading=lazy decoding=async src=background-fetch-usage.png?251208_230839 alt="Chrome Status の Background Fetch API Usage" width=864 height=1045>
          </picture>
        </p>
        <p>確かに、使っているサイトには筆者の <a href="http://mozaic.fm" target=_blank>mozaic.fm</a> のみが表示されている。
        <p>Web 全体から見れば弱小な、筆者の個人サイト 1 つしか表示されないということは、最低でもテレメトリ収集対象でまともに使っているサイトは、本当に存在しないのだろう。
        <p>「これ、消しても良いですか?」
        <p>Web の機能の生殺与奪を委ねられる日が来るとは、全く思っていなかった。
        <p>具体的な削除理由のクリティカルさなどは、そこでは詳細には聞けなかったが、ここで自分がゴネて Web 全体の問題点になるくらいなら、まあ消した方が良いのだろう。現時点で他のブラウザからの実装シグナルもなく、実装されることもなさそうだ。
        <p>後日 Intent to Deprecate が出れば、そこで詳細は分かるだろう、くらいのつもりで「大丈夫です」と返事をした。
      </section>
      <section>
        <h2 id="intent-to-deprecate"><a href="#intent-to-deprecate">Intent to Deprecate</a></h2>
        <p>TPAC が終わってすぐ、その Intent は公開された。
        <ul>
          <li>
            Intent to Ship: deprecate BackgroundFetch
            <ul>
              <li><a href="https://groups.google.com/a/chromium.org/g/blink-dev/c/CpXXaJh5Rq8/" target=_blank>https://groups.google.com/a/chromium.org/g/blink-dev/c/CpXXaJh5Rq8/</a>
              <li>(Intent to Deprecate ではなく Intent to Ship: deprecate になっている)
            </ul>
          </li>
        </ul>
        <p>要約すると以下のような内容だ。
        <ul>
          <li>Chrome 74 (2019/4) に Ship し、6 年ほど経つが、API の利用率が全体の 0.00002% しかない
          <li>この低い使用率に対して、API の維持やセキュリティ対応に要するエンジニアリングのコストは見合っていない
          <li>廃止して代替のソリューション(いわゆる普通のダウンロードなど)に移行したい
        </ul>
        <p>どのような問題があり、どのような維持コストがかかっているかは、ここからは読み取れなかった。
        <p>しかし、この投稿にはすぐにいくつかのフィードバックがつくことになる。
        <ul>
          <li>少ないと言っているが、それでも利用者はいる。その API ユーザとのコミュニケーションはできているのか?
          <li>本当にこんなに利用者が少ないのか? 計測方法次第では潜在ユーザがもっといる可能性はある。
          <li>この Intent ですぐに消すのか? 移行期間を設けるといった長期のスケジュールは切らないでいいのか?
          <li>AI の model ダウンロードなど、ユースケースはまだまだあるはずだ。
          <li>etc. etc.
        </ul>
        <p>だいたいは、予想どおりのものではあった。
      </section>
      <section>
        <h2 id="feedback"><a href="#feedback">Feedback</a></h2>
        <p>渦中の API ユーザでもあり、TPAC でも話をしている手前、黙って見ているわけにもいかないので、自分からもフィードバックを投稿した。別に消されたら自分のサービスが壊れて困る、という意図はない。こうやって「消されてしまう可能性がある」というスタンスのリスクだ。
        <link rel=stylesheet property=stylesheet type=text/css href="https://www.jxck.io/assets/css/pre.css?250125_015123">
        <pre><code translate=no>I am the owner of the website mozaic.fm, which is the only one that appears on that Status page.

私は、その Status ページに唯一出てくるサイト mozaic.fm のオーナーです。

That page is my podcast program, and at that time, I turned the podcast page into an app by adopting the &quot;PWA Narrative&quot; and using its added features. I periodically fetched RSS using periodic background fetch, displayed badge with the badging API if new episodes are available, and downloaded episode MP3s using background fetch so they could be listened to offline.

そのページは私の Podcast Program で、私はその頃 PWA のナラティブに則り、追加された機能を使って、Podcast ページをアプリ化しました。Periodic Background Fetch で RSS を定期取得し、新しいエピソードがあれば Badging API で表示し、Background Fetch でエピソードの mp3 をダウンロードし、オフラインで聴けるようにしました。

However, I implemented it quite a while ago, and since many people listening my program on Spotify or Apple&apos;s podcast apps, I honestly had forgotten about this feature myself.

ところが、実装したのはかなり前で、多くの人は Spotify や Apple の Podcast アプリで聴いていると思われるので、私もこの機能のことはすっかり忘れていました。

At TPAC 2025, I spoke directly with Yoshisato, and he asked me, &quot;Would you mind if this feature were removed ?&quot;.

TPAC 2025 で、私は Yoshisato と直接話し、「この機能の削除についてどう思うか?」と聞かれました。

I told him that if removing this feature would benefit the web, and if I were the only one blocker in worldwide, I wouldn&apos;t oppose it.

私は、この機能の削除が Web のためになり、そのブロッカーが世界で自分しかいないのであれば、反対するつもりはありません。

However, the risks associated with not removing this feature are largely unknown. It&apos;s also unclear whether similar risks exist for other PWA features. PWA has incorporated ambitious capabilities, and I was in a position to try them. The Web values compatibility, but it should prioritize user safety even more. If security risks or similar issues were found, I would understand removing it. However, if the message is simply that &quot;features with few users may be removed,&quot; then adopting new features early becomes a risky act.

しかし、この機能の削除をしないことで発生するリスクはあまりわかっていません。また、同様のリスクが PWA の他の機能ではどうなのかもわかっていません。PWA は野心的な機能を取り込み、私はそれを検証する立場にありました。Web は compat を重視しますが、それ以上に user safety を重視すべきです。

セキュリティリスクなどが見つかって消すならわかりますが、「単に使う人が少ないなら消される可能性がある」となれば、新しい機能に早期に飛びつくことはリスクのあることになってしまいます。そしてこの機能は、その後そこまでアドボケートもされてません。

Were they also hoping to remove other PWA features if they had few users? Wouldn&apos;t that imply that the very concept of &quot;PWA&quot; itself has failed?

PWA の他の機能も、もしユーザが少なければ消したかったのでしょうか?それは PWA というコンセプトそのものが失敗したということでは無いでしょうか?

If the reason was &quot;too few users relative to the maintenance cost,&quot; are there any efforts being made to increase the number of users? At least for Background Fetch, I don&apos;t think there have been any updates or advocacy for a long time.

もし「メンテコストに対してユーザ数が少ない」のが原因なら、ユーザ数を増やす取り組みはしてるのでしょうか?少なくとも Background fetch については、長いこと何もアップデートや紹介を見ないと思います。

I believe PWA was a campaign strongly promoted by Google. Has Google already lost interest in PWA? Do they no longer have the budget or resources to advocate for the features they introduced? If that is the case, what has become of that narrative now?

PWA は Google が推し進めていたキャンペーンだと思います。もう Google は PWA に飽きたのでしょうか?出した機能を啓蒙に割くバジェットもリソースもないのでしょうか?そうであれば、あのナラティブは今どうなっているのでしょうか?

We developers are strongly encouraged to try new features every time a new campaign appears: Layered APIs, Houdini, Web Packaging etc etc. However, browser vendors do not signal when those campaigns have effectively ended. Even when teams are re-orged, people are laid off, or resources are redirected to another campaign, we keep waiting for updates.

我々開発者は、そうしたキャンペーンの登場ごとに、強く先導されて新しい機能を試します。Layered API, Houdini, WebPackaging。しかし、ブラウザベンダーはキャンペーンが終わってもそれをシグナルしてくれません。チームが re-org したり、担当者がレイオフされたり、別のキャンペーンにリソースが取られても、我々はずっと更新を待ってます。

If there were either a serious explanation of why this feature should be removed on its own by security reason, or a clear indication that Google has shifted its overall policy regarding the PWA campaign, I believe we could have a more constructive discussion.

この機能を単体でも消すべき深刻な理由の説明か、PWA というキャンペーン全体に対する Google の方針転換か、そのどちらかがあれば、より建設的な議論ができると思います。

Best,
Jxck</code></pre>
        <p>その後もいくつかのフィードバックが続き、それらを踏まえて、この機能の Deprecate は撤回された。
      </section>
      <section>
        <h2 id="outro"><a href="#outro">Outro</a></h2>
        <p>確かに Chrome しか Ship してない機能ではある。それでも、一度出した機能を消すというのは、やはり Web にとってはかなり難しい。し、そうあるべきだ。
        <p>もちろん、現実的にそのメンテナンスコストは無視できないだろう。PWA キャンペーンが最も盛り上がっていたころ、かなり無理のある機能も次々に投入された。他のブラウザに実装される予定もなく、仕様も宙に浮き、実装した当事者達は AI など別のキャンペーンに駆り出され、引き継いだメンバーがそのコストを払っている、といった構図も見え隠れする。Periodic Background Fetch なんかはよっぽど無理があって、制限も厳しいが、あちらはもう少し使われているので消せないらしい。大変そうだ。
        <p>かといって、そうやって野心的な機能に挑む開発者がいなければ、Web 自体はどんどん停滞していくだろう。そうした取り組みが新しいケイパビリティを増やし、それがユースケースを生み、そこからまた Web が広がっていくうえで、重要な起爆剤になることもある。
        <p>そういう場面では、我々のような人間がこうやって新しい機能を試し、フィードバックをすることで、その機能のゲートキーパーのような存在になれることもある。そんなクリティカルでみんなが舌を巻くようなフィードバックである必要はない。使ってみてどうだったか。なんなら「こんな用途で使ってみた」だけでもいい。それが、我々開発者のできる、もっとも身近な貢献だ。もし筆者が自分のサイトでこの機能を試していなかったら、世界で全く使われていない機能として、もっとすんなり消されていた可能性もあったかと思うと、まあ試しておいて良かったのかもしれない。
        <p>関係ないが、0.00002% ということは、Chrome における <a href="http://mozaic.fm" target=_blank>mozaic.fm</a> のトラフィックは、ざっくり Web 全体の 1000 万分の 2 くらいってことになるのだろうか。500 万分の 1 という生々しい数字が垣間見れたのは、個人的には面白かった。
        <p>ところで、もし次に <a href="http://mozaic.fm" target=_blank>mozaic.fm</a> を刷新するなら、もう PWA にはしない可能性が高い。その際は、世界からこの API のユーザが消える可能性があるので、それまでにこのゲートキーパーを引き継いでくれる人が現れることを祈る。
      </section>
    </article>
  </main>
  <hr>

  <link rel=stylesheet property=stylesheet type=text/css href=https://www.jxck.io/assets/css/footer.css?250125_012520>
  <footer>
    <p class=copyright><small>Copyright &copy; 2016 <a href=https://jxck.io>Jxck</a>. All Rights Reserved.</small> See <small><a href=https://jxck.io/policies/site.html>Site Policy</a> and <a href=https://jxck.io/policies/privacy.html>Privacy Policy</a>.</small></p>
    <!-- Cloudflare Web Analytics --><script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "5a6d3cda77d54761ba2f5c3f56d17ceb"}'></script><!-- End Cloudflare Web Analytics -->
  </footer>

</body>
</html>
