<!DOCTYPE html>
<html amp lang=ja>
<head>
  <meta charset=utf-8>
  <meta name=viewport content="width=device-width,initial-scale=1">

  <link rel=author    href=https://jxck.io/humans.txt>
  <link rel=manifest  href=/manifest.webmanifest>
  <link rel=alternate href=/feeds/atom.xml type=application/atom+xml title=blog.jxck.io>

  <link rel=canonical href=https://blog.jxck.io/entries/2016-06-25/intersection-observer.html>

  <link rel=icon             type =image/svg+xml sizes=any href=https://jxck.io/assets/img/jxck.svg>
  <link rel=icon             type =image/png sizes=256x256 href=https://jxck.io/assets/img/jxck.png>
  <link rel=apple-touch-icon type =image/png sizes=256x256 href=https://jxck.io/assets/img/jxck.png>

  <meta name=author              content=Jxck>
  <meta name=description         content="ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã«ã‚ˆã‚‹ DOM è¦ç´ ã®å‡ºç¾ãªã©ã‚’åŠ¹ç‡ã‚ˆãæ¤œçŸ¥ã™ã‚‹ãŸã‚ã€æ–°ã—ã Intersection Observer ã¨ã„ã† API ãŒè¿½åŠ ã•ã‚ŒãŸã€‚ã“ã® API ã®ä½¿ã„æ–¹ã¨ã€æœ¬ã‚µã‚¤ãƒˆã¸ã®é©ç”¨ã«ã¤ã„ã¦è¨˜ã™ã€‚">
  <meta name=keywords            content="intersection observer,scroll,performance">
  <meta name=theme-color         content=#000000>

  <meta name=twitter:card        content=summary>
  <meta name=twitter:site        content=@jxck_>
  <meta name=twitter:url         content=https://blog.jxck.io/entries/2016-06-25/intersection-observer.html>
  <meta name=twitter:title       content="Intersection Observer ã‚’ç”¨ã„ãŸè¦ç´ å‡ºç¾æ¤œå‡ºã®æœ€é©åŒ– | blog.jxck.io">
  <meta name=twitter:description content="ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã«ã‚ˆã‚‹ DOM è¦ç´ ã®å‡ºç¾ãªã©ã‚’åŠ¹ç‡ã‚ˆãæ¤œçŸ¥ã™ã‚‹ãŸã‚ã€æ–°ã—ã Intersection Observer ã¨ã„ã† API ãŒè¿½åŠ ã•ã‚ŒãŸã€‚ã“ã® API ã®ä½¿ã„æ–¹ã¨ã€æœ¬ã‚µã‚¤ãƒˆã¸ã®é©ç”¨ã«ã¤ã„ã¦è¨˜ã™ã€‚">
  <meta name=twitter:image       content=https://jxck.io/assets/img/jxck.png>

  <meta property=og:type         content=article>
  <meta property=og:url          content=https://blog.jxck.io/entries/2016-06-25/intersection-observer.html>
  <meta property=og:title        content="Intersection Observer ã‚’ç”¨ã„ãŸè¦ç´ å‡ºç¾æ¤œå‡ºã®æœ€é©åŒ– | blog.jxck.io">
  <meta property=og:site_name    content=blog.jxck.io>
  <meta property=og:description  content="ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã«ã‚ˆã‚‹ DOM è¦ç´ ã®å‡ºç¾ãªã©ã‚’åŠ¹ç‡ã‚ˆãæ¤œçŸ¥ã™ã‚‹ãŸã‚ã€æ–°ã—ã Intersection Observer ã¨ã„ã† API ãŒè¿½åŠ ã•ã‚ŒãŸã€‚ã“ã® API ã®ä½¿ã„æ–¹ã¨ã€æœ¬ã‚µã‚¤ãƒˆã¸ã®é©ç”¨ã«ã¤ã„ã¦è¨˜ã™ã€‚">
  <meta property=og:image        content=https://jxck.io/assets/img/jxck.png>

  <script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage":{
      "@type":"WebPage",
      "@id":"https://blog.jxck.io"
    },
    "headline": "Intersection Observer ã‚’ç”¨ã„ãŸè¦ç´ å‡ºç¾æ¤œå‡ºã®æœ€é©åŒ– | blog.jxck.io",
    "image": [
      "https://jxck.io/assets/img/jxck.png",
      "https://logo.jxck.io/jxck.1200x1200.png"
    ],
    "datePublished": "2016-06-25T08:00:00+08:00",
    "dateModified": "2020-12-18T08:00:00+08:00",
    "author": {
      "@type": "Person",
      "name": "Jxck",
      "image": "https://jxck.io/assets/img/jxck.png"
    },
    "publisher": {
      "@type": "Organization",
      "name": "Jxck",
      "logo": {
        "@type": "ImageObject",
        "url": "https://logo.jxck.io/jxck.60x60.png",
        "height": 60,
        "width": 60
      }
    },
    "description": "ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã«ã‚ˆã‚‹ DOM è¦ç´ ã®å‡ºç¾ãªã©ã‚’åŠ¹ç‡ã‚ˆãæ¤œçŸ¥ã™ã‚‹ãŸã‚ã€æ–°ã—ã Intersection Observer ã¨ã„ã† API ãŒè¿½åŠ ã•ã‚ŒãŸã€‚ã“ã® API ã®ä½¿ã„æ–¹ã¨ã€æœ¬ã‚µã‚¤ãƒˆã¸ã®é©ç”¨ã«ã¤ã„ã¦è¨˜ã™ã€‚"
  }
  </script>

  <title>Intersection Observer ã‚’ç”¨ã„ãŸè¦ç´ å‡ºç¾æ¤œå‡ºã®æœ€é©åŒ– | blog.jxck.io</title>
  <script async custom-element=amp-analytics src=https://cdn.ampproject.org/v0/amp-analytics-0.1.js></script>
  <script async custom-element=amp-iframe src=https://cdn.ampproject.org/v0/amp-iframe-0.1.js></script>
  <script async custom-element=amp-ad src=https://cdn.ampproject.org/v0/amp-ad-0.1.js></script>
  <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
  <script async src=https://cdn.ampproject.org/v0.js></script>
  <style amp-custom>
    article section p {
      margin-inline-start: 0;
    }

    article table {
      margin-inline-start: 0;
    }

    article img {
      margin-block-start:  var(--grid);
      margin-block-end:    var(--grid);
      margin-inline-start: 0;
      margin-inline-end:   0;
      border: 1px solid #ccc;
      box-sizing: content-box;
      background-color: #fff;
    }

    article ul,
    article ol,
    article dl {
      margin-inline-start: var(--grid);
      font-family: var(--mono-font);
    }

    article li {
      margin-block-start:  calc(var(--grid)/2);
      margin-block-end:    0;
      margin-inline-start: calc(var(--grid)/2);
      margin-inline-end:   0;
    }

    article dl {
      display: grid;
      grid-template-columns: minmax(auto, max-content);
      grid-column-gap: var(--grid);
    }

    article dl div {
      display: contents;
    }

    article dl dt {
      grid-column: 1 / 2;
    }
    article dl dd {
      grid-column: 2 / 2;
    }

    article blockquote {
      font-family: var(--mono-font);
    }

    article blockquote p {
      margin: 0;
    }

    @supports (line-height-step: 1px) {
      article {
        --grid-rhythm: 1.5em;
        line-height: 1.5;
        line-height-step: var(--grid-rhythm);
      }

      article h1,
      article h2,
      article h3,
      article h4,
      article h5,
      article h6 {
        display: inline-block;
        width: 100%;
        line-height-step: 0;
        line-height: 1.2;
        margin-block-end: 0;
      }

      article section {
        /* grid for debug */
        /* background-size: 100% var(--grid-rhythm); */
        /* background-image: linear-gradient(to bottom, #00bcd1 1px, transparent 1px); */
      }

      article p {
        margin-block-start: var(--grid-rhythm);
        margin-block-end:   var(--grid-rhythm);
      }

      article pre,
      article table {
        line-height-step: 0;
        line-height: normal;
      }
    }
    /* normal regular */
    @font-face {
      font-family: "NotoSansCJKjp-Jxck";
      font-style: normal;
      font-weight: 400;
      font-display: swap;
      src:
        local("Noto Sans CJK JP Regular"),
        url("/assets/font/NotoSansCJKjp-Regular-Jxck-20201215.woff2") format("woff2");
    }
    /* normal bold */
    @font-face {
      font-family: "NotoSansCJKjp-Jxck";
      font-style: normal;
      font-weight: 700;
      font-display: swap;
      src:
        local("Noto Sans CJK JP Bold"),
        url("/assets/font/NotoSansCJKjp-Bold-Jxck-20201215.woff2") format("woff2");
    }


    /* mono regular */
    @font-face {
      font-family: "NotoSansMonoCJKjp-Jxck";
      font-style: normal;
      font-weight: 400;
      font-display: swap;
      src:
        local("Noto Sans Mono CJK JP Regular"),
        url("/assets/font/NotoSansMonoCJKjp-Regular-Jxck-20201215.woff2") format("woff2");
    }
    /* mono bold */
    @font-face {
      font-family: "NotoSansMonoCJKjp-Jxck";
      font-style: normal;
      font-weight: 700;
      font-display: swap;
      src:
        local("Noto Sans Mono CJK JP Bold"),
        url("/assets/font/NotoSansMonoCJKjp-Bold-Jxck-20201215.woff2") format("woff2");
    }

    /* Light Mode Theme */
    :root {
      --background-color: #fefefe;
      --font-color: #222;
      --header-color: #222;

      --anchor-color: RoyalBlue;
      --anchor-visited-color: Brown;

      /*--code-block: #161b22;*/
      --code-block: #182331;
      --code-block-font: #cad6e4;

      --code-inline: #f1f5f9;
      --code-inline-font: #292929;

      --block-quote: #ddd;
      --table-border: #222;

      --regular-font: "Noto Sans", "Noto Sans CJK JP", "NotoSansCJKjp-Jxck", "Hiragino Sans", 'ãƒ’ãƒ©ã‚®ãƒè§’ã‚´ Pro W3', 'ãƒ¡ã‚¤ãƒªã‚ª', sans-serif;
      --mono-font: Menlo, Consolas, Liberation, Mono, Courier, "NotoSansMonoCJKjp-Jxck";
      --code-font: Menlo, Consolas, Liberation, Mono, Courier, "NotoSansMonoCJKjp-Jxck";

      --icon-size: 30px;

      --width: 80vw;
      --max-width: 1024px;

      --grid: 1rem;

      --radius: 4px;
    }


    /* Mobile Theme */
    @media screen and (max-device-width: 960px) {
      :root {
        --width: 94vw;
      }

      audio {
        width: 100%;
      }
    }

    /* Dark Mode Theme */
    @media (prefers-color-scheme: dark) {
      :root {
        --header-color: #111;
        --background-color: #222;
        --font-color: #eee;

        --anchor-color: CornflowerBlue;
        --anchor-visited-color: RosyBrown;

        --table-border: #eee;
      }

      article img {
        filter: grayscale(50%);
      }
      article img[src*=svg] {
        filter: invert(100%) grayscale(50%);
      }
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: var(--regular-font);
      background-color: var(--background-color);
      color: var(--font-color);
      font-feature-settings: "palt";
      margin: 0;
      padding: 0;
    }

    code {
      font-family: var(--mono-font);
    }

    img {
      max-width: 100%;
      height: auto;
    }

    hr {
      margin: 0;
      padding: 0;
    }

    iframe {
      display: block;
      max-width: 100%;
      margin-block-start:  var(--grid);
      margin-block-end:    var(--grid);
      margin-inline-start: 0;
      margin-inline-end:   0;
    }
    dl.info {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      margin: 0;
      padding: 0;
    }

    dl.info div {
      display: flex;
      flex-direction: row;
      flex-wrap: nowrap;
    }

    dl.info dt::after {
      content: ":";
      padding-inline-end: calc(var(--grid)/2);
    }

    dl.info dd {
      margin-block-start: 0;
      margin-block-end: 0;
      margin-inline-end: var(--grid);
      margin-inline-start: 0;
    }

    dl.info dd i {
      font-style: normal;
      padding-inline-end: calc(var(--grid)/3);
    }

    details.info > summary {
    }

    details.info ul {
      margin-block-start: 0;
      margin-inline-start: var(--grid);
    }

    nav.tags {
      display: inline;
    }

    .tags ul {
      display: inline-flex;
      margin: 0;
      padding: 0;
    }

    .tags li:before {
      content: none;
    }

    .tags li:first-child:before{
      content: "[ ";
    }

    .tags li:after {
      content: ",";
      padding-inline-end: 0.5rem;
    }

    .tags li:last-child:after {
      content: " ]";
    }
    header {
      z-index: 1;
      position: sticky;
      position: -webkit-sticky;
      top: 0;
      box-sizing: border-box;
      margin: 0;
      padding: calc(var(--grid)/2);
      background-color: var(--header-color);
    }

    h2:target,
    h3:target,
    h4:target,
    h5:target,
    h6:target {
      /* sticky header ã«åˆã‚ã›ã¦ link scroll ã‚’ãšã‚‰ã™ */
      margin-block-start:  calc((var(--icon-size) + var(--grid)) * -1);
      padding-block-start: calc((var(--icon-size) + var(--grid)));
    }

    header nav {
      width: var(--width);
      max-width: var(--max-width);
      margin-block-start:  0;
      margin-block-end:    0;
      margin-inline-start: auto;
      margin-inline-end:   auto;
    }

    header nav ul {
      width: 100%;
      display: flex;
      flex-direction: row;
      align-items: stretch;
      margin: 0;
    }

    header nav li {
      width:  var(--icon-size);
      height: var(--icon-size);
      padding: 0;
      margin-block-start:  0;
      margin-block-end:    0;
      margin-inline-start: var(--grid);
      margin-inline-end:   0;
    }

    header nav ul li a,
    header nav ul li button {
      display: block;
      width: var(--icon-size);
      height: var(--icon-size);
      padding: 0;
      margin: 0;
      border: none;
      background-color: var(--header-color);
    }

    header nav svg {
      fill: var(--background-color);
    }

    header nav ul li::before {
      content: none;
    }

    header nav ul li:first-child {
      flex-grow: 1;
      margin-inline-start: 0;
    }

    header nav .logo {
      border: 1px solid #fff;
      box-sizing: border-box;
    }
    h1 > a,
    h2 > a,
    h3 > a,
    h4 > a,
    h5 > a,
    h6 > a {
      color: var(--font-color);
    }

    h1 > a:visited,
    h2 > a:visited,
    h3 > a:visited,
    h4 > a:visited,
    h5 > a:visited,
    h6 > a:visited {
      color: var(--font-color);
    }

    h1 > a::before {
      content: "# ";
    }

    h2 > a::before {
      content: "## ";
    }

    h3 > a::before {
      content: "### ";
    }

    h4 > a::before {
      content: "#### ";
    }

    h1 > a:hover::before,
    h2 > a:hover::before,
    h3 > a:hover::before,
    h4 > a:hover::before,
    h5 > a:hover::before,
    h6 > a:hover::before {
      color: var(--anchor-visited-color);
    }

    em {
      font-weight: bold;
      font-style: normal;
    }

    em::before,
    em::after {
      content: "*";
    }

    strong {
      color: red;
    }

    strong::before,
    strong::after {
      content: "**";
    }

    ul li::before {
      content: "- ";
    }

    ol {
      counter-reset: list;
    }

    ol li::before {
      counter-increment: list;
      content: counter(list) ". ";
    }

    dl dt::after {
      content: ":";
    }

    blockquote {
      display: block;
      border: solid 1px var(--block-quote);
      border-radius: var(--radius);
      padding: 1rem;
      margin: 0;
    }

    blockquote p::before {
      content: "> ";
    }

    code {
      background-color: var(--code-inline);
      color: var(--code-inline-font);
      border-radius: var(--radius);
      padding: 0 4px;
    }

    code::before,
    code::after {
      content: "`";
    }
    main {
      display: block;
      width: var(--width);
      max-width: var(--max-width);
      margin-block-start:  1em;
      margin-block-end:    1em;
      margin-inline-start: auto;
      margin-inline-end:   auto;
    }

    a {
      word-wrap: break-word;
      text-decoration: none;
      color: var(--anchor-color);
    }

    a:visited {
      color: var(--anchor-visited-color);
    }

    ol,
    ul {
      list-style: none;
      padding-inline-start: 0;
    }

    li {
      word-break: break-all;
      word-wrap: break-word;
    }

    dl dt {
      font-weight: bold;
      margin: 0;
    }

    dl dd {
      margin: 0;
    }
    footer {
      padding: var(--grid);
    }

    footer strong,
    footer .copyright {
      font-style: italic;
      width: var(--width);
      max-width: var(--max-width);
      margin-block-start:  0;
      margin-block-end:    0;
      margin-inline-start: auto;
      margin-inline-end:   auto;
    }

    /* AdSense */
    footer ins {
      display: block;
      width: var(--width);
      max-width: var(--max-width);
      margin-block-start:  0;
      margin-block-end:    0;
      margin-inline-start: auto;
      margin-inline-end:   auto;
    }
    pre {
      margin-block-start:  var(--grid);
      margin-block-end:    var(--grid);
      margin-inline-start: 0;
      margin-inline-end:   0;
      border-radius: var(--radius);
    }

    pre code {
      background-color: var(--code-block);
      color: var(--code-block-font);
    }

    pre::before {
      content: "```" attr(class) "\A";
    }

    pre::after {
      z-index: -1;
      position: relative;
      top: -1em;
      content: "\A```";
    }

    pre > code {
      font-family: var(--code-font);
      overflow: auto;
      display: block;
      padding: 0.5rem;
      margin: 0;
    }

    pre > code::before,
    pre > code::after {
      content: none;
    }

    .hljs-keyword,
    .hljs-params {
      color: #ff407d;
    }

    .hljs-title {
      color: #b787ff;
    }

    .hljs-string,
    .hljs-regexp {
      color: #84a3ff;
    }

    .hljs-number,
    .hljs-literal {
      color: #03b5f1;
    }

    .hljs-built_in {
      color: #1ada03;
    }

    .hljs-comment {
      color: #96969c;
    }

    .hljs-tag {
      color: #ff429a;
    }

    .hljs-strong {
      font-weight: bold;
    }

    .hljs-attribute {
      font-weight: bold;
      color: #7b9dff;
    }

    .hljs-meta {
      color: #71a0ff;
    }

    .hljs-selector-id,
    .hljs-selector-class,
    .hljs-selector-pseudo {
      color: #a880ef;
    }

    .hljs-selector-tag {
      color: #17c103;
    }

    .hljs-subst {
      font-weight: bold;
    }

    .hljs-variable {
      color: #a71d5d;
    }

    .hljs-symbol {
      font-weight: bold;
    }


    .hljs-bullet {
    }

    /**.hljs,**/
    .hljs-doctag,
    .hljs-code,
    .hljs-addition,
    .hljs-template-variable,
    .hljs-link,
    .hljs-quote,
    .hljs-template-tag,
    .hljs-deletion,
    .hljs-meta-string,
    .hljs-emphasis {
      /** ğŸ™ğŸ™ğŸ™
       * if you find element applyed this style, that's a bug.
       * please tell me https://github.com/jxck/jxck.io/issues
       **/
      font-size: 100em;
    }
    table {
      font-family: var(--mono-font);
      border-spacing: 0 0.4rem;
      margin-block-start:  var(--grid);
      margin-block-end:    var(--grid);
      margin-inline-start: 0;
      margin-inline-end:   0;
    }

    th {
      border-inline-start: 2px solid var(--table-border);
      border-block-end:    2px dashed var(--table-border);
      padding-block-start:  0;
      padding-block-end:    calc(var(--grid)/2);
      padding-inline-start: var(--grid);
      padding-inline-end:   var(--grid);
    }

    td {
      padding-block-start:  calc(var(--grid)/2);
      padding-block-end:    calc(var(--grid)/2);
      padding-inline-start: var(--grid);
      padding-inline-end:   var(--grid);
      border-inline-start: 2px solid var(--table-border);
    }

    th:last-child,
    td:last-child {
      border-inline-end: 2px solid var(--table-border);
    }

    .align-center {
      text-align: center;
    }

    /** TODO: fixup html class */
    .align-left {
      text-align: start;
    }

    /** TODO: fixup html class */
    .align-right {
      text-align: end;
    }
  </style>
</head>
<body>
<header>
  <nav>
    <ul>
      <li><a href=https://blog.jxck.io      ><amp-img width=30 height=30 src=/assets/img/blog.svg   alt="blog logo" class=logo    ></a>
      <li><a href=/searches                 ><amp-img width=30 height=30 src=/assets/img/search.svg alt=search                    ></a>
      <li><a href=.                         ><amp-img width=30 height=30 src=/assets/img/up.svg     alt="move to parent directory"></a>
      <li><a href=/feeds/atom.xml           ><amp-img width=30 height=30 src=/assets/img/rss.svg    alt="rss feed"                ></a>
      <li><a href=https://jxck.io/humans.txt><amp-img width=30 height=30 src=/assets/img/humans.svg alt="huamns.txt"              ></a>
      <li><a href=https://jxck.io           ><amp-img width=30 height=30 src=/assets/img/jxck.svg   alt="jxck logo" class=logo    ></a>
    </ul>
  </nav>
</header>
<main>
  <dl class=info>
    <div><dt>created_at</dt><dd><time class=created_at datetime=2016-06-25>2016-06-25</time></dd></div>
    <div><dt>updated_at</dt><dd><time class=updated_at datetime=2020-12-18>2020-12-18</time></dd></div>
    <div>
        <dt>tags</dt>
        <dd>
          <nav class=tags>
            <ul>
              <li><a href="/tags/intersection%20observer.html">intersection observer</a>
              <li><a href="/tags/scroll.html">scroll</a>
              <li><a href="/tags/performance.html">performance</a>
            </ul>
          </nav>
        </dd>
    </div>
    <div>
      <dt>toc</dt>
      <dd>
        <details class=info>
          <summary>headdings</summary>
          <nav>
            <ul>
              <li><a href=#intro>## Intro</a>
              <li><a href=#è¦ç´ äº¤å·®intersectionã®æ¤œå‡º>## è¦ç´ äº¤å·®(intersection)ã®æ¤œå‡º</a>
              <li><a href=#å¾“æ¥ã®æ–¹æ³•>## å¾“æ¥ã®æ–¹æ³•</a>
              <li><a href=#å›³>### å›³</a>
              <li><a href=#ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é‡scrolltop>### ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é‡(scrollTop)</a>
              <li><a href=#çµ¶å¯¾ä½ç½®offsettop>### çµ¶å¯¾ä½ç½®(offsetTop)</a>
              <li><a href=#ç›¸å¯¾ä½ç½®getboundingclientrect>### ç›¸å¯¾ä½ç½®(getBoundingClientRect)</a>
              <li><a href=#è¡¨ç¤ºåˆ¤å®š>### è¡¨ç¤ºåˆ¤å®š</a>
              <li><a href=#onscroll-ã‚¤ãƒ™ãƒ³ãƒˆ>### onscroll ã‚¤ãƒ™ãƒ³ãƒˆ</a>
              <li><a href=#scroll--position-api-demo>### Scroll &amp; Position API DEMO</a>
              <li><a href=#å•é¡Œç‚¹>## å•é¡Œç‚¹</a>
              <li><a href=#forced-synchronous-layout>### Forced Synchronous Layout</a>
              <li><a href=#intersection-observer>## Intersection Observer</a>
              <li><a href=#api>## API</a>
              <li><a href=#callback>### callback</a>
              <li><a href=#root>### root</a>
              <li><a href=#threshold>### threshold</a>
              <li><a href=#rootmargin>### rootMargin</a>
              <li><a href=#intersection-observe-demo>### Intersection Observe DEMO</a>
              <li><a href=#æœ¬ã‚µã‚¤ãƒˆã¸ã®é©ç”¨>## æœ¬ã‚µã‚¤ãƒˆã¸ã®é©ç”¨</a>
              <li><a href=#links>## Links</a>
            </ul>
          </nav>
        </details>
      </dd>
    </div>
  </dl>
  <article>
    <h1><a href=/entries/2016-06-25/intersection-observer.html>Intersection Observer ã‚’ç”¨ã„ãŸè¦ç´ å‡ºç¾æ¤œå‡ºã®æœ€é©åŒ–</a></h1>
    <section>
      <h2 id="intro"><a href="#intro">Intro</a></h2>
      <p>ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã«ã‚ˆã‚‹ DOM è¦ç´ ã®å‡ºç¾ãªã©ã‚’åŠ¹ç‡ã‚ˆãæ¤œçŸ¥ã™ã‚‹ãŸã‚ã€æ–°ã—ã Intersection Observer ã¨ã„ã† API ãŒè¿½åŠ ã•ã‚ŒãŸã€‚
      <p>ã“ã® API ã®ä½¿ã„æ–¹ã¨ã€æœ¬ã‚µã‚¤ãƒˆã¸ã®é©ç”¨ã«ã¤ã„ã¦è¨˜ã™ã€‚
    </section>
    <section>
      <h2 id="è¦ç´ äº¤å·®intersectionã®æ¤œå‡º"><a href="#è¦ç´ äº¤å·®intersectionã®æ¤œå‡º">è¦ç´ äº¤å·®(intersection)ã®æ¤œå‡º</a></h2>
      <p>ãƒšãƒ¼ã‚¸ã‚’ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦ã„ãéç¨‹ã§ã€ç‰¹å®šã® DOM ãŒç”»é¢ã«å‡ºç¾ã—ãŸã“ã¨ã‚’ãƒ•ãƒƒã‚¯ã—ãŸã„ã‚±ãƒ¼ã‚¹ãŒã‚ã‚‹ã€‚
      <p>ä»£è¡¨ä¾‹ã¯ <em>ç”»åƒã®é…å»¶èª­ã¿è¾¼ã¿</em> ã§ã‚ã‚Šã€åˆæœŸãƒ­ãƒ¼ãƒ‰ã§ã¯ç”»åƒã®å–å¾—ã‚’è¡Œã‚ãšã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦ã„ãéç¨‹ã§é †æ¬¡å–å¾—ã™ã‚‹æ‰‹æ³•ã§ã‚ã‚‹ã€‚
      <p>ç‰¹ã«ç”»åƒã®å¤šã„ãƒšãƒ¼ã‚¸ã§ã¯è¡¨ç¤ºã«å¿…è¦ãªãƒªã‚½ãƒ¼ã‚¹å–å¾—ã®ã¿ã«æœ€é©åŒ–ã§ãã€åˆæœŸç”»é¢è¡¨ç¤ºãªã©ã§ã¯åŠ¹æœãŒå¤§ãã„ã¨ã•ã‚Œã‚‹ã€‚
      <p>ã“ã‚Œã‚’å®Ÿè£…ã™ã‚‹ã®ã«å¿…è¦ãªã®ã¯ã€ã€Œ <code translate="no">&lt;img&gt;</code> è¦ç´ ãŒå‡ºç¾ã—ã¦ã„ã‚‹ã‹ã©ã†ã‹ã€ã§ã‚ã‚‹ãŒã€æœ¬è³ªçš„ã«ã¯ã€Œç”»é¢å¤–ã«ã‚ã£ãŸ <code translate="no">&lt;img&gt;</code> ãŒ viewport ã¨äº¤å·®ã—ãŸã‹ã€ã‚’å–å¾—ã™ã‚‹ã“ã¨ã«ãªã‚‹ã€‚
      <p>ã¤ã¾ã‚Šã€ <em>è¦ç´ å‡ºç¾ã®å–å¾—</em> ã¯ã€ <em>è¦ç´ åŒå£«ã®äº¤å·®å–å¾—</em> ã¨ã—ã¦æ±ç”¨åŒ–ã—ã€ãã®ä¸€ä¾‹ã¨è¦‹ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚
      <p>æ–°ã—ãè¿½åŠ ã•ã‚ŒãŸã€ Intersection Observe ã¯ã€Œå¯¾è±¡ã®è¦ªè¦ç´ ã€ã¨ã€Œå¯¾è±¡ã®è¦ç´ ã€ãŒ <em>äº¤å·®(Intersect)ã—ãŸã“ã¨ã‚’å–å¾—ã™ã‚‹ API</em> ã§ã‚ã‚‹ã€‚
    </section>
    <section>
      <h2 id="å¾“æ¥ã®æ–¹æ³•"><a href="#å¾“æ¥ã®æ–¹æ³•">å¾“æ¥ã®æ–¹æ³•</a></h2>
      <p>ã¾ãšã€å¾“æ¥ã©ã®ã‚ˆã†ã«ã—ã¦è¦ç´ ã®äº¤å·®ã‚’å–å¾—ã—ã¦ã„ãŸã‹ã‚’æŒ¯ã‚Šè¿”ã‚‹ã€‚
      <p>è¦ç´ ã®ä½ç½®ã«é–¢ã™ã‚‹ API ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã€‚
      <p><em>ãŸã ã—ã€ã“ã‚Œã¯äº’æ›æ€§ã®å•é¡Œã‚’å¤šãå«ã‚“ã§ã„ã‚‹ãŸã‚ã€å³å¯†ã«ã¯è‰²ã€…ã‚ã‚‹ãŒã€èª¿ã¹ã‚‹ã®ãŒé¢å€’ã ã£ãŸã®ã§å˜ãªã‚‹å‚è€ƒã¨ã—ã¦è¼‰ã›ã‚‹</em>
      <section>
        <h3 id="å›³"><a href="#å›³">å›³</a></h3>
        <p>å…ˆã«å…¨ä½“å›³ã‚’ç¤ºã™ã€‚ä»Šå›ã¯ä¸Šä¸‹æ–¹å‘ã«ã®ã¿æ³¨ç›®ã™ã‚‹ã€‚
        <p>
          <amp-img layout=responsive src=dom-size-potision-api.svg#700x818 alt="scrollTop, getBoundingClientRect, height ãªã©ã®ç›¸é–¢é–¢ä¿‚ã®è§£èª¬" title="DOM ã®ã‚µã‚¤ã‚ºã¨ä½ç½®ã«é–¢ã™ã‚‹ API" width=700 height=818>
        </p>
      </section>
      <section>
        <h3 id="ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é‡scrolltop"><a href="#ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é‡scrolltop">ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é‡(scrollTop)</a></h3>
        <p>ãƒšãƒ¼ã‚¸ãŒã©ã®ç¨‹åº¦ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã•ã‚ŒãŸã‹ã¨ã„ã†å€¤ã§ã‚ã‚‹ã€‚
        <p>åŸºæœ¬ã¯ <code translate="no">document.documentElement.scrollTop</code> ã ãŒã€äº’æ›ãƒ¢ãƒ¼ãƒ‰ã§ã¯ <code translate="no">document.body.scrollTop</code> ã‚’ä½¿ã†ã€‚
        <p>ã—ã‹ã— iPhone ã«ã¯ <code translate="no">scrollTop</code> ãŒãªã„ã®ã§ã€ <code translate="no">window.pageYOffset</code> ã‚’ä½¿ã†ãŒã€ã“ã‚Œã¯ <code translate="no">window.scrollY</code> ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã«ãªã£ã¦ã„ã‚‹ã€‚
        <p>è¦ã™ã‚‹ã« 4 ã¤ã‚ã‚‹ã€‚
        <ul>
          <li><code translate="no">document.documentElement.scrollTop</code>
          <li><code translate="no">document.body.scrollTop</code>
          <li><code translate="no">window.pageYOffset</code>
          <li><code translate="no">window.scrollY</code>
        </ul>
        <p>ã‚ˆãã‚ã‚‹è©±ã ã€‚
      </section>
      <section>
        <h3 id="çµ¶å¯¾ä½ç½®offsettop"><a href="#çµ¶å¯¾ä½ç½®offsettop">çµ¶å¯¾ä½ç½®(offsetTop)</a></h3>
        <p>body ã‚’è¦ªè¦ç´ ã¨ã™ã‚Œã°ã€ãã“ã‹ã‚‰ã® offset ä½ç½®ã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¸Šã®çµ¶å¯¾ä½ç½®ã¨è€ƒãˆã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚
        <p>ã“ã‚Œã¯ã€è¦ç´ è‡ªä½“ãŒæŒã£ã¦ã„ã‚‹ã€‚
        <pre class=js><code translate="no">let target = document.querySelector(&#39;.target&#39;);
// target.offsetTop;
// target.offsetHeight;
// target.offsetWidth;
// target.offsetLeft;</code></pre>
      </section>
      <section>
        <h3 id="ç›¸å¯¾ä½ç½®getboundingclientrect"><a href="#ç›¸å¯¾ä½ç½®getboundingclientrect">ç›¸å¯¾ä½ç½®(getBoundingClientRect)</a></h3>
        <p>å¯¾è±¡ã® DOM ãŒã€ç¾åœ¨ç”»é¢è¡¨ç¤º(viewport)ä¸Šã©ã®ä½ç½®ã«ã‚ã‚‹ã‹ã€‚
        <p>ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã™ã‚‹ãŸã³ã«å¤‰ã‚ã‚‹å€¤ã§ã€å¸¸ã«è¡¨ç¤ºé ˜åŸŸã®ä¸­ã®ä½ç½®ã«ãªã‚‹ã€‚
        <p>ã“ã‚Œã¯ã€å¯¾è±¡ DOM ã® <code translate="no">getBoundingClientRect()</code> ã§å–ã‚Œã‚‹ã€‚
        <pre class=js><code translate="no">let rect = target.getBoundingClientRect();
// rect.top;
// rect.bottom;
// rect.height;
// rect.left;
// rect.right;
// rect.width;</code></pre>
      </section>
      <section>
        <h3 id="è¡¨ç¤ºåˆ¤å®š"><a href="#è¡¨ç¤ºåˆ¤å®š">è¡¨ç¤ºåˆ¤å®š</a></h3>
        <p>ã“ã“ã¾ã§ã‚’è¸ã¾ãˆã‚‹ã¨ã€ç”»é¢ã‚’ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã€ç”»é¢ã®ä¸­ã«å¯¾è±¡ã® DOM ãŒå…¥ã£ã¦ã„ã‚‹ã“ã¨ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«åˆ¤å®šã§ãã‚‹ã€‚
        <pre class=js><code translate="no">   (0 &lt; rect.top &amp;&amp; rect.top &lt; clientHeight)       // å¯¾è±¡ã®ä¸Šç«¯ã¯è¡¨ç¤ºé ˜åŸŸã«å…¥ã£ã¦ã„ã‚‹
|| (0 &lt; rect.bottom &amp;&amp; rect.bottom &lt; clientHeight) // å¯¾è±¡ã®ä¸‹ç«¯ã¯è¡¨ç¤ºé ˜åŸŸã«å…¥ã£ã¦ã„ã‚‹
|| (rect.top &lt; 0 &amp;&amp; clientHeight &lt; rect.bottom)    // ä¸Šç«¯ä¸‹ç«¯ã‚‚è¡¨ç¤ºã•ã‚Œã¦ãªã„ãŒãã®é–“ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹</code></pre>
        <p>ã“ã®ä¸‰ã¤ã®è«–ç†å’ŒãŒæº€ãŸã•ã‚Œã‚Œã°ã€ã©ã“ã‹ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã€‚
        <p>ã‚‚ã¡ã‚ã‚“ã€è¨ˆç®—åŸºæº–ã®è¦ªè¦ç´ ã‚’å¤‰ãˆã‚Œã°ã€ viewport ä»¥å¤–ã®è¦ç´ ã§ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã«ã‚ˆã‚‹å‡ºç¾ã«ã‚‚å¯¾å¿œã§ãã‚‹ã€‚
      </section>
      <section>
        <h3 id="onscroll-ã‚¤ãƒ™ãƒ³ãƒˆ"><a href="#onscroll-ã‚¤ãƒ™ãƒ³ãƒˆ">onscroll ã‚¤ãƒ™ãƒ³ãƒˆ</a></h3>
        <p>ä¸Šè¨˜ã®åˆ¤å®šã¯ã€ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã™ã‚‹ãŸã³ã€ã¤ã¾ã‚Š onscroll ã‚¤ãƒ™ãƒ³ãƒˆã”ã¨ã«è¨ˆç®—ã™ã‚Œã° DOM ã®å‡ºç¾ç›£è¦–ã«ãªã‚‹ã€‚
        <p>ãŸã ã—ã€ onscroll ã¯ç™ºç”Ÿé »åº¦ãŒéå¸¸ã«å¤šã„ãŸã‚ã€æ„šç›´ã«ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã«æŒ‡å®šã—ã¦ã—ã¾ã†ã¨ã€ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã«ãªã‚Š Scroll Jank ã‚’å¼•ãèµ·ã“ã™å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚
        <p>å¯¾ç­–ã¨ã—ã¦ã¯ã€ã¾ãšã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’å®Ÿè¡Œã™ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã‚’é–“å¼•ã throttling ãŒã‚ã‚‹ã€‚
        <p>ä¾‹ãˆã°ã€ underscore.js ã® <a href="http://underscorejs.org/#throttle">throttle()</a> ç›¸å½“ã®ã‚‚ã®ã‚„ã€ Reactive Extension ç³»ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã†ã“ã¨ã§å®Ÿç¾ã§ãã‚‹ã€‚
        <p>ã¾ãŸã€è¨ˆç®—å‡¦ç†ã®ã¿ã§ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’æŠœã‘ã‚‹ã®ã§ã‚ã‚Œã°ã€ <code translate="no">.preventDefault()</code> ã‚’å‘¼ã°ãªã„ãŸã‚ã€åˆ¥ã‚¨ãƒ³ãƒˆãƒªã§è§£èª¬ã—ãŸ Passive Event Listener ã‚’åˆ©ç”¨ã§ãã‚‹ã€‚
        <ul>
          <li><a href="https://blog.jxck.io/entries/2016-06-09/passive-event-listeners.html">Passive Event Listeners ã«ã‚ˆã‚‹ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã®æ”¹å–„</a>
        </ul>
      </section>
      <section>
        <h3 id="scroll--position-api-demo"><a href="#scroll--position-api-demo">Scroll &amp; Position API DEMO</a></h3>
        <p>ã“ã“ã¾ã§ã® API ã®å€¤ã®å¤‰åŒ–ã‚’ç¢ºèªã™ã‚‹ãƒ‡ãƒ¢ã‚’ä»¥ä¸‹ã«ç”¨æ„ã—ãŸã€‚
        <ul>
          <li><a href="https://labs.jxck.io/intersection-observer/size.html">Scroll &amp; Position API DEMO</a>
        </ul>
      </section>
    </section>
    <section>
      <h2 id="å•é¡Œç‚¹"><a href="#å•é¡Œç‚¹">å•é¡Œç‚¹</a></h2>
      <p>ã•ã¦ã€ã“ã“ã¾ã§è¦‹ã¦æ¥ãŸæ–¹æ³•ã«ã¯å¤šãã®å•é¡ŒãŒã‚ã£ãŸã€‚
      <ol>
        <li>scroll event ã®ãƒãƒ³ãƒ‰ãƒ©ãŒ Scroll Jank ã‚’å¼•ãèµ·ã“ã™å¯èƒ½æ€§ãŒã‚ã‚‹
        <li>å…¨ scroll event ã§ã®å®Ÿæ–½ã¯å›æ•°ãŒå¤šã„ã®ã§ã€ throttling (ã¾ã³ã)ã‚’è¡Œã†å¿…è¦ãŒã‚ã‚‹
        <li>ã‚µã‚¤ã‚ºã‚„ä½ç½®ã‚’å–å¾—ã™ã‚‹ API ã¯ Forced Synchronous Layout ã‚’ç™ºç”Ÿã•ã›ã‚‹
        <li>API ãŒåˆ†ã‹ã‚Šã¥ã‚‰ãã€äº’æ›æ€§ã‚‚å¾®å¦™ã§ã€å˜ç´”ã«å®Ÿè£…ãŒé¢å€’ãã•ã„
      </ol>
      <p>ã“ã“ã§ã¯ 3 ã«æ³¨ç›®ã—ãŸã„ã€‚
      <section>
        <h3 id="forced-synchronous-layout"><a href="#forced-synchronous-layout">Forced Synchronous Layout</a></h3>
        <p>ã“ã“ã¾ã§ã«ç´¹ä»‹ã—ãŸã€ <code translate="no">scrollTop</code>, <code translate="no">offset</code>, <code translate="no">getBoundingClientRect()</code> ãªã©ã®å‘¼ã³å‡ºã—ã¯ã€ãã®æ™‚ç‚¹ã§ã® DOM ã®ä½ç½®ã‚’å–å¾—ã™ã‚‹ãŸã‚ã« Layout è¨ˆç®—ã‚’è¡Œã†ã€‚
        <p>ã“ã®è¨ˆç®—ã¯åŒæœŸå‡¦ç†ã§ã‚ã‚Šã€ã¤ã¾ã‚Šãƒ–ãƒ­ãƒƒã‚¯ãŒç™ºç”Ÿã™ã‚‹ã€‚ã•ã‚‰ã«ãã‚Œã‚’ onscroll ãªã©é »åº¦ã®é«˜ã„ã‚¤ãƒ™ãƒ³ãƒˆã®ä¸­ã§è¡Œã†ã®ã¯ã€ã‚¹ãƒ ãƒ¼ã‚ºãªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«è¡¨ç¤ºã®ãŸã‚ã®ãƒ–ãƒ©ã‚¦ã‚¶ã®æœ€é©åŒ–ã‚’é˜»å®³ã—ã¦ã—ã¾ã†ã€‚
        <p>ãã“ã§ã€ã“ã®é »å‡ºå‡¦ç†ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒã‚¤ãƒ†ã‚£ãƒ– API ã¨ã—ã¦å®Ÿè£…ã—ã€ã‚ˆã‚ŠåŠ¹ç‡è‰¯ãå®Ÿè£…ã™ã‚‹ã®ãŒã€ä»Šå›ç´¹ä»‹ã™ã‚‹ Intersection Observer ã§ã‚ã‚‹ã€‚
      </section>
    </section>
    <section>
      <h2 id="intersection-observer"><a href="#intersection-observer">Intersection Observer</a></h2>
      <p>Intersection Observer ã¯äº¤ç‚¹(Intersection) ã‚’ç›£è¦–ã—ã€æŒ‡å®šã—ãŸè¦ç´ åŒå£«ã®äº¤å·®ãŒç™ºç”Ÿã—ãŸã‚‰ã€ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºç«ã™ã‚‹ Observer ã§ã‚ã‚‹ã€‚
      <p>äº¤ç‚¹ã®æ¤œå‡ºå‡¦ç†ã¯ã€ãƒ–ãƒ©ã‚¦ã‚¶ãŒå†…éƒ¨ã§è¡Œã£ã¦ã„ã‚‹ãŸã‚ã€å‰è¿°ã®ã‚ˆã†ãª onscroll å†…ã§ã®åŒæœŸå‡¦ç†ãªã©ã¯ä¸€åˆ‡å¿…è¦ãŒãªããªã‚‹ã€‚
      <p>é€†ã‚’è¨€ãˆã°ã€ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä»¥å¤–ã«ã‚ˆã‚‹äº¤å·®ã®ç™ºç”Ÿã‚‚ä¸€æ‹¬ã—ã¦å–å¾—ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã«ãªã‚‹ã€‚
      <p>ã“ã‚Œã«ã‚ˆã‚Šã€ Scroll Jank ã®åŸå› ãŒé™¤å»ã•ã‚Œã€åŠ¹ç‡è‰¯ãå®Ÿè£…ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã¨ãªã‚‹ã€‚
    </section>
    <section>
      <h2 id="api"><a href="#api">API</a></h2>
      <p>ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã¨ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã—ã€ Intersection Observer Class ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã™ã‚‹ã€‚
      <p>ç”Ÿæˆã—ãŸ Observer ã«å¯¾ã—ã¦ã€ä»»æ„ã® DOM è¦ç´ ã‚’ <code translate="no">observe()</code> ãƒ¡ã‚½ãƒƒãƒ‰ã§æŒ‡å®šã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€å¯¾è±¡ã‚’ç›£è¦–ã™ã‚‹ã€‚
      <p>è¤‡æ•°è¦ç´ ã‚’åŒã˜ã‚ˆã†ã«ç›£è¦–ã™ã‚‹å ´åˆã¯ã€åŒã˜ Intersection Observer ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã€ observe ã‚’è¤‡æ•°å›å‘¼ã¶ã“ã¨ãŒã§ãã‚‹ã€‚
      <pre class=js><code translate="no">let observer = new IntersectionObserver((changes) =&gt; {
  for (let change of changes) {
    console.log(change);
  }
}, option);
observer.observe(target);</code></pre>
      <section>
        <h3 id="callback"><a href="#callback">callback</a></h3>
        <p>è¤‡æ•°ã® DOM ã‚’ç›£è¦–ã—ãŸå ´åˆã¯ã€ä¸€ã¤ã®ã‚¤ãƒ™ãƒ³ãƒˆã§è¤‡æ•°ã®å¤‰æ›´ãŒå–å¾—ã•ã‚Œã‚‹ãŸã‚ã€ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã®å¼•æ•°ã¯ç›£è¦–ã—ãŸ DOM ã®æ•°ã ã‘å…¥ã£ã¦ãã‚‹ã€‚
        <p>ä¸€ã¤ã®å¤‰æ›´ã¯ä»¥ä¸‹ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æŒã¤
        <table>
          <thead>
            <tr>
              <th class=align-left>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</th>
              <th class=align-left>å†…å®¹</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class=align-left><code translate="no">change.time</code></td>
              <td class=align-left>ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—</td>
            </tr>
            <tr>
              <td class=align-left><code translate="no">change.rootBounds</code></td>
              <td class=align-left>root ã® <code translate="no">getBoundingClientRect()</code></td>
            </tr>
            <tr>
              <td class=align-left><code translate="no">change.boundingClientRect</code></td>
              <td class=align-left>target ã® <code translate="no">getBoundingClientRect()</code></td>
            </tr>
            <tr>
              <td class=align-left><code translate="no">change.intersectionRect</code></td>
              <td class=align-left>äº¤å·®é ˜åŸŸã® <code translate="no">getBoundingClientRect()</code></td>
            </tr>
            <tr>
              <td class=align-left><code translate="no">change.intersectionRatio</code></td>
              <td class=align-left>äº¤å·®ã—ã¦ã„ã‚‹é ˜åŸŸã®å‰²åˆ</td>
            </tr>
            <tr>
              <td class=align-left><code translate="no">change.target</code></td>
              <td class=align-left>target</td>
            </tr>
          </tbody>
        </table>
        <p>
          <amp-img layout=responsive src=intersection-observer.svg#500x357 alt="IntersectionObserver ã®å„ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒè¡¨ã™éƒ¨åˆ†" title="Intersection Observer API" width=500 height=357>
        </p>
        <p>ç‰¹ã« <code translate="no">change.intersectionRect</code> ãŠã‚ˆã³ <code translate="no">change.intersectionRatio</code> ã¯ã€è‡ªåˆ†ã§è¨ˆç®—ã™ã‚‹ã¨ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã«ãªã‚ŠãŒã¡ã§ã‚ã‚‹ã€‚
        <p>ç¬¬äºŒå¼•æ•°ã«ã¯ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¨ã—ã¦ä¸‰ã¤ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¨­å®šã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æŒ‡å®šã§ãã‚‹ã€‚
        <pre class=js><code translate="no">let observer = new IntersectionObserver((changes) =&gt; {
  // callback
}, {
  root: document.querySelector(&#39;.target&#39;),
  threshold: [0, 0.2, 0.4, 0.6, 0.8, 1.0],
  rootMargin: &#39;10px&#39;,
});
observer.observe(target);</code></pre>
      </section>
      <section>
        <h3 id="root"><a href="#root">root</a></h3>
        <p>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€ viewport ã‚’å¯¾è±¡ã«ã—ãŸäº¤å·®æ¤œå‡ºã‚’è¡Œã†ã“ã¨ãŒã§ãã‚‹ãŒã€ã“ã‚Œã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã® root ãŒ document è‡ªèº«ã«ãªã£ã¦ã„ã‚‹ã‹ã‚‰ã§ã‚ã‚‹ã€‚
        <p>root ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ç”¨ã„ã‚‹ã“ã¨ã§ã€ä»»æ„ã®è¦ªè¦ç´ å†…ã‚’æŒ‡å®šã§ãã‚‹ãŸã‚ã€ä¾‹ãˆã° <code translate="no">overflow: scroll</code> ã«ãªã£ãŸ div ã®ä¸­ã®äº¤å·®ã‚’åˆ¤å®šã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚
        <pre class=js><code translate="no">{ root: document.querySelector(&#39;.target&#39;) }</code></pre>
      </section>
      <section>
        <h3 id="threshold"><a href="#threshold">threshold</a></h3>
        <p><code translate="no">change.intersectionRatio</code> ã«ã‚ˆã£ã¦ã€äº¤å·®ã—ã¦ã„ã‚‹é ˜åŸŸã®å‰²åˆã‚’å–å¾—ã§ãã‚‹ãŒã€ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ãŒå‘¼ã°ã‚Œã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãŒäº¤å·®ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã ã‘ã§ã¯ã€ 0% ã‚„ 100% ãªã©ã‚ã¾ã‚Šå½¹ã«ç«‹ãŸãªã„å€¤ã—ã‹å‡ºãªã„ã€‚
        <p>ã“ã‚Œã¯ã€è¡¨ç¤ºãŒ 0 (è¡¨ç¤ºã•ã‚Œã¦ãªã„), 100 (å…¨ã¦è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹) ã®ã©ã¡ã‚‰ã‹ã—ã‹ãªã„ãŸã‚ã§ã‚ã‚‹ã€‚
        <p>ã‚¤ãƒ™ãƒ³ãƒˆç™ºç”Ÿé »åº¦ã‚’å¢—ã‚„ã™ã«ã¯ã€ threshold ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ã†ã“ã¨ãŒã§ãã‚‹ã€‚
        <p>ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ã‚ˆã†ã«å¼•æ•°ã‚’è¨­å®šã™ã‚Œã°ã€äº¤å·®é ˜åŸŸãŒ 20% å¤‰åŒ–ã™ã‚‹æ¯ã«ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’å‘¼ã¶ã“ã¨ãŒã§ãã‚‹ã€‚
        <pre class=js><code translate="no">{ threshold: [0, 0.2, 0.4, 0.6, 0.8, 1.0] }</code></pre>
        <p>ã“ã‚Œã«ã‚ˆã‚Šã€è¡¨ç¤ºé ˜åŸŸã®å¤‰åŒ–ã«åˆã‚ã›ãŸã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã‚‚å®Ÿè£…ãŒå¯èƒ½ã«ãªã‚‹ã€‚
      </section>
      <section>
        <h3 id="rootmargin"><a href="#rootmargin">rootMargin</a></h3>
        <p>ç”»åƒã®é…å»¶èª­ã¿è¾¼ã¿ãªã©ã‚’å®Ÿè£…ã—ãŸã„å ´åˆã¯ã€ viewport ã‚’ root ã¨ã—ã¦ <code translate="no">&lt;img&gt;</code> ã‚’ IntersectionObserver ã§ç›£è¦–ã™ã‚‹ã ã‚ã†ã€‚
        <p>viewport ä¸Šã« <code translate="no">&lt;img&gt;</code> ãŒå‡ºç¾ã—ãŸã“ã¨ã‚’æ¤œå‡ºã™ã‚‹ã“ã¨ã§ã€ãã“ã§ç”»åƒã®å–å¾—ã‚’èµ°ã‚‰ã›ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚
        <p>ã—ã‹ã—ã€ viewport ä¸Šã«è¡¨ç¤ºã•ã‚Œã¦ã‹ã‚‰å–å¾—ã™ã‚‹ã‚ˆã‚Šã€è¡¨ç¤ºã•ã‚Œã‚‹å°‘ã—å‰ã«å–å¾—ã‚’é–‹å§‹ã§ãã‚Œã°ã€å°ã•ã„ç”»åƒãªã‚‰ç©ºã® <code translate="no">&lt;img&gt;</code> ã™ã‚‰å‡ºã•ãšã«æ¸ˆã‚€å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚
        <p>ã“ã†ã—ãŸå ´åˆã¯ rootMargin ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚
        <p>å€¤ã¯ CSS ã® margin ã¸ã®æŒ‡å®šã¨åŒã˜ã ã€ä¾‹ãˆã°ä»¥ä¸‹ã®ã‚ˆã†ã«è¨­å®šã™ã‚Œã°ã€ä¸Šä¸‹å·¦å³ãŒäº¤å·®ã™ã‚‹ 10px æ‰‹å‰ã§ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç«ã™ã‚‹ã€‚
        <pre class=js><code translate="no">{ rootMargin: &#39;10px&#39; }</code></pre>
      </section>
      <section>
        <h3 id="intersection-observe-demo"><a href="#intersection-observe-demo">Intersection Observe DEMO</a></h3>
        <p>Intersection Observer ã‚’ç”¨ã„ãŸã€åŸºæœ¬çš„ãªãƒ‡ãƒ¢ã‚’ç”¨æ„ã—ãŸã€‚
        <p>threshold ã‚’ 10% ã«ã—ã€ intersectionRatio ã‚’è¡¨ç¤ºã™ã‚‹ã‚ˆã†ã«å®Ÿè£…ã—ã¦ã„ã‚‹ã€‚
        <ul>
          <li><a href="https://labs.jxck.io/intersection-observer/intersection.html">Intersection Observer DEMO</a>
        </ul>
        <p>ã¾ãŸä»¥ä¸‹ã« Intersecton Observer ã¨ã€ãã‚Œä»¥å‰ã® API ã§ã€è¦ç´ å‡ºç¾ã®æ¤œå‡ºã‚’æ¯”è¼ƒã™ã‚‹ DEMO ã‚’ç”¨æ„ã—ãŸã€‚
        <p>ã“ã¡ã‚‰ã¯ã€ <code translate="no">overflow: scroll</code> ãª div ã‚’è¦ªã¨ã™ã‚‹å‡ºç¾æ¤œå‡ºã‚‚å«ã‚ã¦ã‚ã‚‹ã€‚
        <ul>
          <li><a href="https://labs.jxck.io/intersection-observer/visibility-change.html">Visibility Change DEMO</a>
        </ul>
      </section>
    </section>
    <section>
      <h2 id="æœ¬ã‚µã‚¤ãƒˆã¸ã®é©ç”¨"><a href="#æœ¬ã‚µã‚¤ãƒˆã¸ã®é©ç”¨">æœ¬ã‚µã‚¤ãƒˆã¸ã®é©ç”¨</a></h2>
      <p>ã“ã®æ©Ÿèƒ½ã‚’ç”¨ã„ã¦ã€æœ¬ã‚µã‚¤ãƒˆã§ã‚‚ç”»åƒã®é…å»¶èª­ã¿è¾¼ã¿ã‚’å®Ÿè£…ã™ã‚‹ã¤ã‚‚ã‚Šã§ã„ã‚‹ã€‚
      <p>ã—ã‹ã—ã€æœ¬ã‚µã‚¤ãƒˆã§ã¯ Service Worker ã‚„ HTTP2 Push ãªã©ä»–ã®æœ€é©åŒ–æˆ¦ç•¥ã‚‚ä½µç”¨ã™ã‚‹äºˆå®šã§ã‚ã‚‹ãŸã‚ã€æ¤œè¨¼ãŒã¾ã è¿½ã„ã¤ã„ã¦ã„ãªã„ã€‚
      <p>ã¾ãŸã€ç¾çŠ¶ã§ã¯æœ€é©åŒ–ã—ãŸ SVG ãŒã»ã¨ã‚“ã©ã§ã‚ã‚‹ãŸã‚ã€ç”»åƒã®å–å¾—ãŒãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã¨è¦‹ãªã™ã«ã¯å¼±ã„å ´åˆãŒå¤šãã€ä¸€æ—¦è¦‹é€ã‚‹ã“ã¨ã«ã—ãŸã€‚
      <p>å°†æ¥çš„ã«æœ€é©åŒ–æˆ¦ç•¥ãŒè½ã¡ç€ã„ãŸã‚‰ã€è¿½è¨˜ã™ã‚‹ã€‚
    </section>
    <section>
      <h2 id="links"><a href="#links">Links</a></h2>
      <ul>
        <li><a href="https://wicg.github.io/IntersectionObserver/">Intersection Observer Spec</a>
        <li><a href="https://github.com/WICG/IntersectionObserver/blob/gh-pages/explainer.md">Intersection Observers Explained</a>
        <li><a href="https://gist.github.com/paulirish/5d52fb081b3570c81e3a">What forces layout/reflow. The comprehensive list.</a>
      </ul>
    </section>
  </article>
</main>
<hr>
<footer>
  <p class=copyright><small>Copyright &copy; 2016 <a href=/>Jxck</a>. All Rights Reserved.</small> See <small><a href=/policies/site.html>Site Policy</a> and <a href=/policies/privacy.html>Privacy Policy</a>.</small></p>
  <amp-ad width=100vw height=320 type=adsense data-ad-client=ca-pub-2902784829138215 data-ad-slot=9735419796 data-auto-format=rspv data-full-width><div overflow></div></amp-ad>
</footer>
</body>
</html>
<amp-analytics type=googleanalytics id=analytics1>
<script type="application/json">
{
  "vars": {
    "account": "UA-15088753-7"
  },
  "triggers": {
    "trackPageview": {
      "on": "visible",
      "request": "pageview"
    }
  }
}
</script>
</amp-analytics>