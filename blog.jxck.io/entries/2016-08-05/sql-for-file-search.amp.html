<!DOCTYPE html>
<html amp lang=ja>
<head>
  <meta charset=utf-8>
  <meta name=viewport content="width=device-width,initial-scale=1">

  <link rel=author    href=https://jxck.io/humans.txt>
  <link rel=manifest  href=/manifest.webmanifest>
  <link rel=alternate href=/feeds/atom.xml type=application/atom+xml title=blog.jxck.io>

  <link rel=canonical href=https://blog.jxck.io/entries/2016-08-05/sql-for-file-search.html>

  <link rel=icon             type =image/svg+xml sizes=any href=https://jxck.io/assets/img/jxck.svg>
  <link rel=icon             type =image/png sizes=256x256 href=https://jxck.io/assets/img/jxck.png>
  <link rel=apple-touch-icon type =image/png sizes=256x256 href=https://jxck.io/assets/img/jxck.png>

  <meta name=author              content=Jxck>
  <meta name=description         content="UNIX ã‚³ãƒãƒ³ãƒ‰ã‚’ SQL ã§æŠ½å‡ºã§ãã‚‹ãƒ„ãƒ¼ãƒ« qq ã‚’ä½œã£ãŸã€‚ ã¨ã„ã†ã‚¨ãƒ³ãƒˆãƒªã‚’èª­ã‚“ã§ã€ãã†ã„ãˆã°ä¼¼ãŸã‚ˆã†ãªã‚‚ã®ã‚’ä½œã£ã¦ãŸãªã¨æ€ã„å‡ºã—ãŸã€‚è‡ªåˆ†ã® dotfiles ã®ä¸­ã«ã‚ã‚‹ã€ä¾¿åˆ©ã‚³ãƒãƒ³ãƒ‰é›†ã®ä¸­ã«ã‚ã‚‹ selects ã«ã¤ã„ã¦ã§ã‚ã‚‹ã€‚ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ SQL ã¨ã„ã†æ¤œç´¢ã‚’...">
  <meta name=keywords            content="selects,sql,linux">
  <meta name=theme-color         content=#000000>

  <meta name=twitter:card        content=summary>
  <meta name=twitter:site        content=@jxck_>
  <meta name=twitter:url         content=https://blog.jxck.io/entries/2016-08-05/sql-for-file-search.html>
  <meta name=twitter:title       content="SQL ã§ãƒ•ã‚¡ã‚¤ãƒ«æ¤œç´¢ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ selects ã‚’æ›¸ã„ãŸè©± | blog.jxck.io">
  <meta name=twitter:description content="UNIX ã‚³ãƒãƒ³ãƒ‰ã‚’ SQL ã§æŠ½å‡ºã§ãã‚‹ãƒ„ãƒ¼ãƒ« qq ã‚’ä½œã£ãŸã€‚ ã¨ã„ã†ã‚¨ãƒ³ãƒˆãƒªã‚’èª­ã‚“ã§ã€ãã†ã„ãˆã°ä¼¼ãŸã‚ˆã†ãªã‚‚ã®ã‚’ä½œã£ã¦ãŸãªã¨æ€ã„å‡ºã—ãŸã€‚è‡ªåˆ†ã® dotfiles ã®ä¸­ã«ã‚ã‚‹ã€ä¾¿åˆ©ã‚³ãƒãƒ³ãƒ‰é›†ã®ä¸­ã«ã‚ã‚‹ selects ã«ã¤ã„ã¦ã§ã‚ã‚‹ã€‚ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ SQL ã¨ã„ã†æ¤œç´¢ã‚’...">
  <meta name=twitter:image       content=https://jxck.io/assets/img/jxck.png>

  <meta property=og:type         content=article>
  <meta property=og:url          content=https://blog.jxck.io/entries/2016-08-05/sql-for-file-search.html>
  <meta property=og:title        content="SQL ã§ãƒ•ã‚¡ã‚¤ãƒ«æ¤œç´¢ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ selects ã‚’æ›¸ã„ãŸè©± | blog.jxck.io">
  <meta property=og:site_name    content=blog.jxck.io>
  <meta property=og:description  content="UNIX ã‚³ãƒãƒ³ãƒ‰ã‚’ SQL ã§æŠ½å‡ºã§ãã‚‹ãƒ„ãƒ¼ãƒ« qq ã‚’ä½œã£ãŸã€‚ ã¨ã„ã†ã‚¨ãƒ³ãƒˆãƒªã‚’èª­ã‚“ã§ã€ãã†ã„ãˆã°ä¼¼ãŸã‚ˆã†ãªã‚‚ã®ã‚’ä½œã£ã¦ãŸãªã¨æ€ã„å‡ºã—ãŸã€‚è‡ªåˆ†ã® dotfiles ã®ä¸­ã«ã‚ã‚‹ã€ä¾¿åˆ©ã‚³ãƒãƒ³ãƒ‰é›†ã®ä¸­ã«ã‚ã‚‹ selects ã«ã¤ã„ã¦ã§ã‚ã‚‹ã€‚ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ SQL ã¨ã„ã†æ¤œç´¢ã‚’...">
  <meta property=og:image        content=https://jxck.io/assets/img/jxck.png>

  <script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage":{
      "@type":"WebPage",
      "@id":"https://blog.jxck.io"
    },
    "headline": "SQL ã§ãƒ•ã‚¡ã‚¤ãƒ«æ¤œç´¢ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ selects ã‚’æ›¸ã„ãŸè©± | blog.jxck.io",
    "image": [
      "https://jxck.io/assets/img/jxck.png",
      "https://logo.jxck.io/jxck.1200x1200.png"
    ],
    "datePublished": "2016-08-05T08:00:00+08:00",
    "dateModified": "2020-12-18T08:00:00+08:00",
    "author": {
      "@type": "Person",
      "name": "Jxck",
      "image": "https://jxck.io/assets/img/jxck.png"
    },
    "publisher": {
      "@type": "Organization",
      "name": "Jxck",
      "logo": {
        "@type": "ImageObject",
        "url": "https://logo.jxck.io/jxck.60x60.png",
        "height": 60,
        "width": 60
      }
    },
    "description": "UNIX ã‚³ãƒãƒ³ãƒ‰ã‚’ SQL ã§æŠ½å‡ºã§ãã‚‹ãƒ„ãƒ¼ãƒ« qq ã‚’ä½œã£ãŸã€‚ ã¨ã„ã†ã‚¨ãƒ³ãƒˆãƒªã‚’èª­ã‚“ã§ã€ãã†ã„ãˆã°ä¼¼ãŸã‚ˆã†ãªã‚‚ã®ã‚’ä½œã£ã¦ãŸãªã¨æ€ã„å‡ºã—ãŸã€‚è‡ªåˆ†ã® dotfiles ã®ä¸­ã«ã‚ã‚‹ã€ä¾¿åˆ©ã‚³ãƒãƒ³ãƒ‰é›†ã®ä¸­ã«ã‚ã‚‹ selects ã«ã¤ã„ã¦ã§ã‚ã‚‹ã€‚ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ SQL ã¨ã„ã†æ¤œç´¢ã‚’..."
  }
  </script>

  <title>SQL ã§ãƒ•ã‚¡ã‚¤ãƒ«æ¤œç´¢ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ selects ã‚’æ›¸ã„ãŸè©± | blog.jxck.io</title>
  <script async custom-element=amp-analytics src=https://cdn.ampproject.org/v0/amp-analytics-0.1.js></script>
  <script async custom-element=amp-iframe src=https://cdn.ampproject.org/v0/amp-iframe-0.1.js></script>
  <script async custom-element=amp-ad src=https://cdn.ampproject.org/v0/amp-ad-0.1.js></script>
  <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
  <script async src=https://cdn.ampproject.org/v0.js></script>
  <style amp-custom>
    article section p {
      margin-inline-start: 0;
    }

    article table {
      margin-inline-start: 0;
    }

    article img {
      margin: var(--grid) 0;
      border: 1px solid #ccc;
      box-sizing: content-box;
      background-color: #fff;
    }

    article ul,
    article ol,
    article dl {
      margin-inline-start: var(--grid);
      font-family: var(--mono-font);
    }

    article dl {
      display: grid;
      grid-template-columns: minmax(auto, max-content);
      grid-column-gap: var(--grid);
    }

    article dl div {
      display: contents;
    }

    article dl dt {
      grid-column: 1 / 2;
    }
    article dl dd {
      grid-column: 2 / 2;
    }

    article blockquote {
      font-family: var(--mono-font);
    }

    article blockquote p {
      margin: 0;
    }

    @supports (line-height-step: 1px) {
      article {
        --grid-rhythm: 1.5em;
        line-height: 1.5;
        line-height-step: var(--grid-rhythm);
      }

      article h1,
      article h2,
      article h3,
      article h4,
      article h5,
      article h6 {
        display: inline-block;
        width: 100%;
        line-height-step: 0;
        line-height: 1.2;
        margin-block-end: 0;
      }

      article section {
        /* grid for debug */
        /* background-size: 100% var(--grid-rhythm); */
        /* background-image: linear-gradient(to bottom, #00bcd1 1px, transparent 1px); */
      }

      article p {
        margin-block-start: var(--grid-rhythm);
        margin-block-end: var(--grid-rhythm);
      }

      article pre,
      article table {
        line-height-step: 0;
        line-height: normal;
      }
    }
    /* normal regular */
    @font-face {
      font-family: "NotoSansCJKjp-Jxck";
      font-style: normal;
      font-weight: 400;
      font-display: swap;
      src:
        local("Noto Sans CJK JP Regular"),
        url("/assets/font/NotoSansCJKjp-Regular-Jxck-20201215.woff2") format("woff2");
    }
    /* normal bold */
    @font-face {
      font-family: "NotoSansCJKjp-Jxck";
      font-style: normal;
      font-weight: 700;
      font-display: swap;
      src:
        local("Noto Sans CJK JP Bold"),
        url("/assets/font/NotoSansCJKjp-Bold-Jxck-20201215.woff2") format("woff2");
    }


    /* mono regular */
    @font-face {
      font-family: "NotoSansMonoCJKjp-Jxck";
      font-style: normal;
      font-weight: 400;
      font-display: swap;
      src:
        local("Noto Sans Mono CJK JP Regular"),
        url("/assets/font/NotoSansMonoCJKjp-Regular-Jxck-20201215.woff2") format("woff2");
    }
    /* mono bold */
    @font-face {
      font-family: "NotoSansMonoCJKjp-Jxck";
      font-style: normal;
      font-weight: 700;
      font-display: swap;
      src:
        local("Noto Sans Mono CJK JP Bold"),
        url("/assets/font/NotoSansMonoCJKjp-Bold-Jxck-20201215.woff2") format("woff2");
    }

    /* Light Mode Theme */
    :root {
      --background-color: #fefefe;
      --font-color: #222;
      --header-color: #222;

      --anchor-color: RoyalBlue;
      --anchor-visited-color: Brown;

      /*--code-block: #161b22;*/
      --code-block: #182331;
      --code-block-font: #cad6e4;

      --code-inline: #f1f5f9;
      --code-inline-font: #292929;

      --block-quote: #ddd;
      --table-border: #222;

      --regular-font: "Noto Sans", "Noto Sans CJK JP", "NotoSansCJKjp-Jxck", "Hiragino Sans", 'ãƒ’ãƒ©ã‚®ãƒè§’ã‚´ Pro W3', 'ãƒ¡ã‚¤ãƒªã‚ª', sans-serif;
      --mono-font: Menlo, Consolas, Liberation, Mono, Courier, "NotoSansMonoCJKjp-Jxck";
      --code-font: Menlo, Consolas, Liberation, Mono, Courier, "NotoSansMonoCJKjp-Jxck";

      --icon-size: 30px;

      --width: 80vw;
      --max-width: 1024px;

      --grid: 1rem;

      --radius: 4px;
    }


    /* Mobile Theme */
    @media screen and (max-device-width: 960px) {
      :root {
        --width: 94vw;
      }

      audio {
        width: 100%;
      }
    }

    /* Dark Mode Theme */
    @media (prefers-color-scheme: dark) {
      :root {
        --header-color: #111;
        --background-color: #222;
        --font-color: #eee;

        --anchor-color: CornflowerBlue;
        --anchor-visited-color: RosyBrown;

        --table-border: #eee;
      }

      article img {
        filter: grayscale(50%);
      }
      article img[src*=svg] {
        filter: invert(100%) grayscale(50%);
      }
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: var(--regular-font);
      background-color: var(--background-color);
      color: var(--font-color);
      font-feature-settings: "palt";
      margin: 0;
      padding: 0;
    }

    code {
      font-family: var(--mono-font);
    }

    img {
      max-width: 100%;
      height: auto;
    }

    hr {
      margin: 0;
      padding: 0;
    }

    iframe {
      display: block;
      max-width: 100%;
      margin: var(--grid) 0;
    }
    dl.info {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      margin: 0;
      padding: 0;
    }

    dl.info div {
      display: flex;
      flex-direction: row;
      flex-wrap: nowrap;
    }

    dl.info dt::after {
      content: ":";
      padding-inline-end: calc(var(--grid)/2);
    }

    dl.info dd {
      margin: 0 var(--grid) 0 0;
    }

    dl.info dd i {
      font-style: normal;
      padding-inline-end: calc(var(--grid)/3);
    }

    details.info > summary {
    }

    details.info ul {
      margin-block-start: 0;
      margin-inline-start: var(--grid);
    }

    nav.tags {
      display: inline;
    }

    .tags ul {
      display: inline-flex;
      margin: 0;
      padding: 0;
    }

    .tags li:before {
      content: none;
    }

    .tags li:first-child:before{
      content: "[ ";
    }

    .tags li:after {
      content: ",";
      padding-inline-end: 0.5rem;
    }

    .tags li:last-child:after {
      content: " ]";
    }
    header {
      z-index: 1;
      position: sticky;
      position: -webkit-sticky;
      top: 0;
      box-sizing: border-box;
      margin: 0;
      padding: calc(var(--grid)/2);
      background-color: var(--header-color);
    }

    h2:target,
    h3:target,
    h4:target,
    h5:target,
    h6:target {
      /* sticky header ã«åˆã‚ã›ã¦ link scroll ã‚’ãšã‚‰ã™ */
      margin-block-start:  calc((var(--icon-size) + var(--grid)) * -1);
      padding-block-start: calc((var(--icon-size) + var(--grid)));
    }

    header nav {
      width: var(--width);
      max-width: var(--max-width);
      margin: 0 auto;
    }

    header nav ul {
      width: 100%;
      display: flex;
      flex-direction: row;
      align-items: stretch;
      margin: 0;
    }

    header nav li {
      width:  var(--icon-size);
      height: var(--icon-size);
      padding: 0;
      margin: 0 0 0 var(--grid);
    }

    header nav ul li a,
    header nav ul li button {
      display: block;
      width: var(--icon-size);
      height: var(--icon-size);
      padding: 0;
      margin: 0;
      border: none;
      background-color: var(--header-color);
    }

    header nav svg {
      fill: var(--background-color);
    }

    header nav ul li::before {
      content: none;
    }

    header nav ul li:first-child {
      flex-grow: 1;
      margin-inline-start: 0;
    }

    header nav .logo {
      border: 1px solid #fff;
      box-sizing: border-box;
    }
    h1 > a,
    h2 > a,
    h3 > a,
    h4 > a,
    h5 > a,
    h6 > a {
      color: var(--font-color);
    }

    h1 > a:visited,
    h2 > a:visited,
    h3 > a:visited,
    h4 > a:visited,
    h5 > a:visited,
    h6 > a:visited {
      color: var(--font-color);
    }

    h1 > a::before {
      content: "# ";
    }

    h2 > a::before {
      content: "## ";
    }

    h3 > a::before {
      content: "### ";
    }

    h4 > a::before {
      content: "#### ";
    }

    h1 > a:hover::before,
    h2 > a:hover::before,
    h3 > a:hover::before,
    h4 > a:hover::before,
    h5 > a:hover::before,
    h6 > a:hover::before {
      color: var(--anchor-visited-color);
    }

    em {
      font-weight: bold;
      font-style: normal;
    }

    em::before,
    em::after {
      content: "*";
    }

    strong {
      color: red;
    }

    strong::before,
    strong::after {
      content: "**";
    }

    ul li::before {
      content: "- ";
    }

    ol {
      counter-reset: list;
    }

    ol li::before {
      counter-increment: list;
      content: counter(list) ". ";
    }

    dl dt::after {
      content: ":";
    }

    blockquote {
      display: block;
      border: solid 1px var(--block-quote);
      border-radius: var(--radius);
      padding: 1rem;
      margin: 0;
    }

    blockquote p::before {
      content: "> ";
    }

    code {
      background-color: var(--code-inline);
      color: var(--code-inline-font);
      border-radius: var(--radius);
      padding: 0 4px;
    }

    code::before,
    code::after {
      content: "`";
    }
    main {
      display: block;
      width: var(--width);
      max-width: var(--max-width);
      margin: 1em auto;
    }

    a {
      word-wrap: break-word;
      text-decoration: none;
      color: var(--anchor-color);
    }

    a:visited {
      color: var(--anchor-visited-color);
    }

    ol,
    ul {
      list-style: none;
      padding-inline-start: 0;
    }

    li {
      word-break: break-all;
      word-wrap: break-word;
    }

    dl dt {
      font-weight: bold;
      margin: 0;
    }

    dl dd {
      margin: 0;
    }
    footer {
      padding: var(--grid);
    }

    footer strong,
    footer .copyright {
      width: var(--width);
      max-width: var(--max-width);
      margin: 0 auto;
      font-style: italic;
    }

    /* AdSense */
    footer ins {
      display: block;
      width: var(--width);
      max-width: var(--max-width);
      margin: 0 auto;
    }
    pre {
      margin: var(--grid) 0;
      border-radius: var(--radius);
    }

    pre code {
      background-color: var(--code-block);
      color: var(--code-block-font);
    }

    pre::before {
      content: "```" attr(class) "\A";
    }

    pre::after {
      z-index: -1;
      position: relative;
      top: -1em;
      content: "\A```";
    }

    pre > code {
      font-family: var(--code-font);
      overflow: auto;
      display: block;
      padding: 0.5rem;
      margin: 0;
    }

    pre > code::before,
    pre > code::after {
      content: none;
    }

    .hljs-keyword,
    .hljs-params {
      color: #ff407d;
    }

    .hljs-title {
      color: #b787ff;
    }

    .hljs-string,
    .hljs-regexp {
      color: #84a3ff;
    }

    .hljs-number,
    .hljs-literal {
      color: #03b5f1;
    }

    .hljs-built_in {
      color: #1ada03;
    }

    .hljs-comment {
      color: #96969c;
    }

    .hljs-tag {
      color: #ff429a;
    }

    .hljs-strong {
      font-weight: bold;
    }

    .hljs-attribute {
      font-weight: bold;
      color: #7b9dff;
    }

    .hljs-meta {
      color: #71a0ff;
    }

    .hljs-selector-id,
    .hljs-selector-class,
    .hljs-selector-pseudo {
      color: #a880ef;
    }

    .hljs-selector-tag {
      color: #17c103;
    }

    .hljs-subst {
      font-weight: bold;
    }

    .hljs-variable {
      color: #a71d5d;
    }

    .hljs-symbol {
      font-weight: bold;
    }


    .hljs-bullet {
    }

    /**.hljs,**/
    .hljs-doctag,
    .hljs-code,
    .hljs-addition,
    .hljs-template-variable,
    .hljs-link,
    .hljs-quote,
    .hljs-template-tag,
    .hljs-deletion,
    .hljs-meta-string,
    .hljs-emphasis {
      /** ğŸ™ğŸ™ğŸ™
       * if you find element applyed this style, that's a bug.
       * please tell me https://github.com/jxck/jxck.io/issues
       **/
      font-size: 100em;
    }
    table {
      font-family: var(--mono-font);
      margin: var(--grid) 0;
      border-spacing: 0 0.4rem;
    }

    th {
      padding: 0 var(--grid) calc(var(--grid)/2) var(--grid);
      border-inline-start: 2px solid var(--table-border);
      border-block-end: 2px dashed var(--table-border);
    }

    td {
      padding: calc(var(--grid)/2) var(--grid);
      border-inline-start: 2px solid var(--table-border);
    }

    th:last-child,
    td:last-child {
      border-inline-end: 2px solid var(--table-border);
    }

    .align-center {
      text-align: center;
    }

    /** TODO: fixup html class */
    .align-left {
      text-align: start;
    }

    /** TODO: fixup html class */
    .align-right {
      text-align: end;
    }
  </style>
</head>
<body>
<header>
  <nav>
    <ul>
      <li><a href=https://blog.jxck.io      ><amp-img width=30 height=30 src=/assets/img/blog.svg   alt="blog logo" class=logo    ></a>
      <li><a href=/searches                 ><amp-img width=30 height=30 src=/assets/img/search.svg alt=search                    ></a>
      <li><a href=.                         ><amp-img width=30 height=30 src=/assets/img/up.svg     alt="move to parent directory"></a>
      <li><a href=/feeds/atom.xml           ><amp-img width=30 height=30 src=/assets/img/rss.svg    alt="rss feed"                ></a>
      <li><a href=https://jxck.io/humans.txt><amp-img width=30 height=30 src=/assets/img/humans.svg alt="huamns.txt"              ></a>
      <li><a href=https://jxck.io           ><amp-img width=30 height=30 src=/assets/img/jxck.svg   alt="jxck logo" class=logo    ></a>
    </ul>
  </nav>
</header>
<main>
  <dl class=info>
    <div><dt>created_at</dt><dd><time class=created_at datetime=2016-08-05>2016-08-05</time></dd></div>
    <div><dt>updated_at</dt><dd><time class=updated_at datetime=2020-12-18>2020-12-18</time></dd></div>
    <div>
      <dt class=tags>tags</dt>
      <dd>
        <nav>
          <ul>
            <li><a href="/tags/selects.html">selects</a>
            <li><a href="/tags/sql.html">sql</a>
            <li><a href="/tags/linux.html">linux</a>
          </ul>
        </nav>
      </dd>
    </div>
    <div>
      <dt>toc</dt>
      <dd>
        <details class=info>
          <summary>headdings</summary>
          <nav>
            <ul>
              <li><a href=#intro>## Intro</a>
              <li><a href=#selects>## selects</a>
              <li><a href=#example>## Example</a>
              <li><a href=#ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä»¥ä¸‹ã‚’ã”ã£ãã‚Š>### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä»¥ä¸‹ã‚’ã”ã£ãã‚Š</a>
              <li><a href=#html-ã ã‘>### .html ã ã‘</a>
              <li><a href=#like-çš„ãª>### like çš„ãª</a>
              <li><a href=#å±æ€§ã§çµã‚‹>### å±æ€§ã§çµã‚‹</a>
              <li><a href=#dev-ä»¥ä¸‹ã§-pipe-ã‹-socket-ã‹-symlink-ã ã‘ã‚’-ctime-atime-ã®é †ã§>### /dev ä»¥ä¸‹ã§ pipe ã‹ socket ã‹ symlink ã ã‘ã‚’ ctime, atime ã®é †ã§</a>
              <li><a href=#ã‹ã‚‰ãã‚Š>## ã‹ã‚‰ãã‚Š</a>
              <li><a href=#ãƒ¡ãƒªãƒƒãƒˆ>## ãƒ¡ãƒªãƒƒãƒˆ</a>
              <li><a href=#ç´°ã‹ã„ã¨ã“ã‚>## ç´°ã‹ã„ã¨ã“ã‚</a>
            </ul>
          </nav>
        </details>
      </dd>
    </div>
  </dl>
  <article>
    <h1><a href=/entries/2016-08-05/sql-for-file-search.html>SQL ã§ãƒ•ã‚¡ã‚¤ãƒ«æ¤œç´¢ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ selects ã‚’æ›¸ã„ãŸè©±</a></h1>
    <section>
      <h2 id="intro"><a href="#intro">Intro</a></h2>
      <p><a href="http://mattn.kaoriya.net/software/lang/go/20160805190022.htm">UNIX ã‚³ãƒãƒ³ãƒ‰ã‚’ SQL ã§æŠ½å‡ºã§ãã‚‹ãƒ„ãƒ¼ãƒ« qq ã‚’ä½œã£ãŸã€‚</a> ã¨ã„ã†ã‚¨ãƒ³ãƒˆãƒªã‚’èª­ã‚“ã§ã€ãã†ã„ãˆã°ä¼¼ãŸã‚ˆã†ãªã‚‚ã®ã‚’ä½œã£ã¦ãŸãªã¨æ€ã„å‡ºã—ãŸã€‚
      <p>è‡ªåˆ†ã® <a href="https://github.com/jxck/dotfiles">dotfiles</a> ã®ä¸­ã«ã‚ã‚‹ã€ä¾¿åˆ©ã‚³ãƒãƒ³ãƒ‰é›†ã®ä¸­ã«ã‚ã‚‹ <a href="https://github.com/Jxck/dotfiles/blob/master/bin/selects">selects</a> ã«ã¤ã„ã¦ã§ã‚ã‚‹ã€‚
      <p>ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ SQL ã¨ã„ã†æ¤œç´¢ã‚’è¨˜è¿°çš„ã«è¡¨ç¾ã™ã‚‹å…±é€šè¨€èªã‚’ãƒ•ã‚¡ã‚¤ãƒ«æ¤œç´¢ã«å¿œç”¨ã—ã€ Ruby ã®å‹•çš„è¨€èªã¨ã—ã¦è¡¨ç¾åŠ›ã‚’ä½¿ã£ã¦å®Ÿè£…ã—ãŸã‚‚ã®ã¨ã„ãˆã‚‹ã€‚
      <p>ãã®å®Ÿè£…æ–¹æ³•ã¨å®Ÿè¡Œä¾‹ãªã©ã«ã¤ã„ã¦è¨˜ã™ã€‚
    </section>
    <section>
      <h2 id="selects"><a href="#selects">selects</a></h2>
      <p>çµè«–ã‹ã‚‰ã„ã†ã¨ã“ã†ã„ã†ã‚³ãƒãƒ³ãƒ‰ã ã€‚
      <pre class=sh><code translate="no">$ selects mtime, size, basename from &#39;./entries/**/*&#39; where extname &#39;==&#39; &#39;.md&#39; and size &#39;&gt;&#39; 1000 order by mtime

2016-07-06 22:45:44 +0900	18437	web-font-noto-sans.md
2016-07-07 23:54:19 +0900	11236	amp-html.md
2016-07-07 23:54:19 +0900	10906	loading-css-over-http2.md
2016-07-07 23:54:19 +0900	14171	preload.md
2016-07-07 23:54:19 +0900	10279	svg-font-base-ui.md
2016-07-07 23:54:19 +0900	14168	public-key-pinning.md
2016-07-07 23:54:19 +0900	12291	service-worker-tutorial.md
2016-07-07 23:54:19 +0900	17377	stale-while-revalidate.md
2016-08-02 13:46:38 +0900	12564	intersection-observer.md</code></pre>
      <p>åŒã˜ã“ã¨ã‚’ã„ã‚ã‚†ã‚‹ã‚·ã‚§ãƒ«èŠ¸ã§è¡Œã†ã“ã¨ã¯ã§ãã‚‹ãŒã€ã“ã†æ›¸ã„ãŸæ–¹ãŒå¾Œã§èª­ã‚“ã æ™‚ã€ä»–äººãŒèª­ã‚“ã æ™‚ã«ã€æ„å›³ã‚’å«ã‚ã¦ã‚ã‹ã‚Šã‚„ã™ãç„¡ã„ã ã‚ã†ã‹?
      <p>ãã†æ€ã£ã¦ç¢ºã‹ä¸‰ãƒ¶æœˆãã‚‰ã„å‰ã‹ã‚‰æš‡ã‚’è¦‹ã¦æ›¸ã„ã¦ã‚‹ãŒã€ã¾ã‚éŠã³ã®ã‚ˆã†ãªã‚‚ã®ãªã®ã§ã€ã¾ã  dotfiles ã®ä¾¿åˆ©ã‚³ãƒãƒ³ãƒ‰ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å…¥ã£ã¦ã„ã‚‹ã€‚
      <p>ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ç„¡ãã€ 1 ãƒ•ã‚¡ã‚¤ãƒ«ã§å®Œçµã—ã¦ã„ã‚‹ã®ã§ã€ãƒ‘ã‚¹ã®é€šã£ãŸæ‰€ã«ç½®ã„ã¦ã‚‚ã‚‰ãˆã‚Œã°ã™ãä½¿ãˆã‚‹ã€‚
      <p><a href="https://github.com/Jxck/dotfiles/blob/master/bin/selects">https://github.com/Jxck/dotfiles/blob/master/bin/selects</a>
    </section>
    <section>
      <h2 id="example"><a href="#example">Example</a></h2>
      <p>ã¾ãšä¾‹ã‚’ã„ãã¤ã‹ç¤ºã™ã€‚
      <section>
        <h3 id="ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä»¥ä¸‹ã‚’ã”ã£ãã‚Š"><a href="#ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä»¥ä¸‹ã‚’ã”ã£ãã‚Š">ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä»¥ä¸‹ã‚’ã”ã£ãã‚Š</a></h3>
        <pre class=sh><code translate="no">$ selects &#39;*&#39; from &#39;./entries/**/*&#39;
2016-08-05 22:42:14 +0900	4096	2016-01-27
2016-08-05 22:40:44 +0900	12499	new-blog-start.amp.html
2016-08-05 22:41:32 +0900	3756	new-blog-start.amp.html.gz
2016-08-05 22:40:44 +0900	6813	new-blog-start.html
2016-08-05 22:41:30 +0900	2117	new-blog-start.html.gz
2016-08-05 22:40:20 +0900	1102	new-blog-start.md
2016-08-05 22:41:30 +0900	671	new-blog-start.md.gz
....</code></pre>
      </section>
      <section>
        <h3 id="html-ã ã‘"><a href="#html-ã ã‘">.html ã ã‘</a></h3>
        <pre class=sh><code translate="no">$ selects basename from &#39;./entries/**/*&#39; where extname == &#39;.html&#39;
new-blog-start.amp.html
new-blog-start.html
html-compression.amp.html
html-compression.html
amp-html.amp.html
amp-html.html
h2o-http2-deploy.amp.html
...</code></pre>
      </section>
      <section>
        <h3 id="like-çš„ãª"><a href="#like-çš„ãª">like çš„ãª</a></h3>
        <pre class=sh><code translate="no">$ selects basename from &#39;./entries/**/*&#39; where basename &#39;=~&#39; &#39;mozaic&#39;
mozaicfm-v2.amp.html
mozaicfm-v2.amp.html.gz
mozaicfm-v2.html
mozaicfm-v2.html.gz
mozaicfm-v2.md
mozaicfm-v2.md.gz</code></pre>
      </section>
      <section>
        <h3 id="å±æ€§ã§çµã‚‹"><a href="#å±æ€§ã§çµã‚‹">å±æ€§ã§çµã‚‹</a></h3>
        <pre class=sh><code translate="no">$ selects atime, basename from &#39;./entries/**/*&#39; where atime &#39;&gt;&#39; 2016-08-01 and directory? == true
2016-08-05 22:42:14 +0900       2016-01-27
2016-08-05 22:42:14 +0900       2016-01-28
2016-08-05 22:42:14 +0900       2016-02-01
2016-08-05 22:42:14 +0900       2016-02-08
2016-08-05 22:42:14 +0900       2016-02-09
2016-08-05 22:42:14 +0900       2016-02-11</code></pre>
      </section>
      <section>
        <h3 id="dev-ä»¥ä¸‹ã§-pipe-ã‹-socket-ã‹-symlink-ã ã‘ã‚’-ctime-atime-ã®é †ã§"><a href="#dev-ä»¥ä¸‹ã§-pipe-ã‹-socket-ã‹-symlink-ã ã‘ã‚’-ctime-atime-ã®é †ã§">/dev ä»¥ä¸‹ã§ pipe ã‹ socket ã‹ symlink ã ã‘ã‚’ ctime, atime ã®é †ã§</a></h3>
        <pre class=sh><code translate="no">$ selects socket?, pipe?, symlink? basename from &#39;/dev/*&#39; where pipe? == true or socket? == true or symlink? == true order by atime, ctime
false   true    true    initctl
false   false   true    dvd
false   false   true    cdrom
false   false   true    rtc
true    false   true    log
false   false   true    stderr
false   false   true    stdout
false   false   true    stdin
false   false   true    fd
false   false   true    core</code></pre>
      </section>
    </section>
    <section>
      <h2 id="ã‹ã‚‰ãã‚Š"><a href="#ã‹ã‚‰ãã‚Š">ã‹ã‚‰ãã‚Š</a></h2>
      <p>ãªã‚“ã¨ãªãæ°—ã¥ã„ãŸæ–¹ãŒã„ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ãŒã€ã“ã‚Œã¯å…¨éƒ¨ Ruby ã«å¤‰æ›ã—ã¦ã„ã‚‹ã€‚
      <p>ã¤ã¾ã‚Šã“ã‚“ãªæ„Ÿã˜ã ã€‚
      <pre class=ruby><code translate="no">Dir.glob(&#39;from å¥ã«ã‚ãŸã‚‹ */** çš„ãªã®&#39;)
   .select(&#39;where å¥ã«ã‚ãŸã‚‹ filter ã® proc&#39;)
   .sort(&#39;order by å¥ã«ã‚ãŸã‚‹ sort ã® proc&#39;)
   .map(&#39;æŠ½å‡ºã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ select å¥ã«ã‚ãŸã‚‹å±æ€§ã‚’å–ã‚Šå‡ºã™&#39;)</code></pre>
      <p>å„ Proc ã¯å¼•æ•°ã¨ã—ã¦å—ã‘å–ã£ãŸãƒˆãƒ¼ã‚¯ãƒ³ã‚’å…ƒã« Ruby ã®ãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ã‚¤ãƒ³ã‚’çµ„ã¿ç«‹ã¦ã¦ã„ã‚‹ã€‚
      <p>ä¾‹ãˆã°
      <pre class=sql><code translate="no">where size &gt; 1000</code></pre>
      <p>ã¯
      <pre class=ruby><code translate="no">File.size(file) &gt; 100</code></pre>
      <p>ã«ãªã‚Œã°è‰¯ã„ã€‚
      <p>ã“ã‚Œã‚’æ–‡å­—ã¨ã—ã¦å¾—ã¦ã„ã‚‹ <code translate="no">&#39;size&#39;</code>, <code translate="no">&#39;&gt;&#39;</code>, <code translate="no">&#39;100&#39;</code> ã‚’ä½¿ã£ã¦å‹•çš„ã«çµ„ã¿ç«‹ã¦ã‚‹ã¨ä»¥ä¸‹ã«ãªã‚‹ã€‚
      <pre class=ruby><code translate="no">File
  .method(&#39;size&#39;)
  .call(file)
  .method(&#39;&gt;&#39;)
  .call(100)</code></pre>
      <p>ã“ã®ä»•çµ„ã¿ã‚’è¸ã¾ãˆãŸä¸Šã§ã‚‚ã†ä¸€åº¦ã‚¯ã‚¨ãƒªã‚’è¦‹ã¦ã¿ã¦æ¬²ã—ã„ã€‚
      <p>ã‚‚ã¯ã‚„ Ruby ã®ãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ã‚¤ãƒ³ã«ã—ã‹è¦‹ãˆãªã„ã®ã§ã¯ãªã„ã ã‚ã†ã‹?
      <pre class=sh><code translate="no">$ selects atime, basename from &#39;./entries/**/*&#39; where atime &#39;&gt;&#39; 2016-08-01 and directory? == true</code></pre>
      <p><code translate="no">select</code>, <code translate="no">where</code>, <code translate="no">order by</code> ã«ä½¿ãˆã‚‹å±æ€§ãªã©ã‚‚ã€ ruby ã® File ã‚¯ãƒ©ã‚¹ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è¦‹ã¦ãã‚Œã‚Œã°è‰¯ã„ã€‚
      <p><a href="https://docs.ruby-lang.org/ja/2.3.0/class/File.html">https://docs.ruby-lang.org/ja/2.3.0/class/File.html</a>
      <p>è£ã« Ruby ãŒé€ã‘ã¦è¦‹ãˆã‚‹ãŸã‚ã€ Ruby ã‚’çŸ¥ã£ã¦ã‚‹ã¨ã€Œã“ã†ã™ã‚Œã°å‹•ããã†ã€ãŒãã®ã¾ã¾å‹•ãã€‚
      <p>ã“ã‚ŒãŒ Ruby ã«ã—ãŸç†ç”±ã ã€‚
    </section>
    <section>
      <h2 id="ãƒ¡ãƒªãƒƒãƒˆ"><a href="#ãƒ¡ãƒªãƒƒãƒˆ">ãƒ¡ãƒªãƒƒãƒˆ</a></h2>
      <p>éŠã³ã§ä½œã‚Šå§‹ã‚ãŸå‰²ã«ã¯çµæ§‹æ‰‹å¿œãˆã‚’æ„Ÿã˜ãŸã‚Šã‚‚ã—ã¦ã„ã‚‹ã€‚
      <p>å®Ÿéš›ã«è¤‡é›‘ãªãƒ•ã‚¡ã‚¤ãƒ«ã®æ¤œç´¢ã‚’ <code translate="no">find</code> ã‚„ <code translate="no">grep</code> ã‚’é§†ä½¿ã—ãŸãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã§æ›¸ãã¨éå¸¸ã«èª­ã¿ã«ãã„ã€‚ã¾ã—ã¦ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®å±æ€§ã‚„ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ä¸­ã®æ–‡å­—ã§è¤‡é›‘ãªæ¤œç´¢ã‚„ã‚½ãƒ¼ãƒˆã™ã‚‹ã®ã¯ã€æ›¸ã‘ã¦ã‚‚äºŒåº¦ã¨èª­ã‚ãªã„å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚
      <p>ç‰¹ã«ã€è‡ªåˆ†ã¯ã‚·ã‚§ãƒ«èŠ¸åŠ›ãŒä½ã„ã®ã§ã€ãã†ã„ã£ãŸå ´åˆã¯æœ€åˆã‹ã‚‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›¸ãã ã‚ã†ã€‚ã¨ã“ã‚ãŒãã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚‚ã€çµå±€ã¯ <code translate="no">glob</code> ã—ã¦ <code translate="no">map</code> ã—ã¦ <code translate="no">reduce</code> ã™ã‚‹ã‚ˆãã‚ã‚‹ã‚‚ã®ãªã®ã§ã€ãã‚Œã‚’ DSL ã£ã½ãã—ãŸã®ãŒã“ã®ã‚³ãƒãƒ³ãƒ‰ã®æ­£ä½“ã ã€‚
      <p>ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ SQL ã¨ã„ã†æ¤œç´¢ã‚’è¨˜è¿°çš„ã«è¡¨ç¾ã™ã‚‹å…±é€šè¨€èªã‚’ãƒ•ã‚¡ã‚¤ãƒ«æ¤œç´¢ã«å¿œç”¨ã—ã€ Ruby ã¨ã„ã†è¡¨ç¾åŠ›ãŒé«˜ã„å‹•çš„è¨€èªã®ãƒ¡ãƒªãƒƒãƒˆã‚’æ´»ã‹ã—ã¦å®Ÿè£…ã—ãŸ DSL ã¨è¨€ãˆã‚‹ã€‚
      <p>ã ã‹ã‚‰ Ruby ã‚’çŸ¥ã£ã¦ã¦ SQL ãŒæ›¸ã‘ã‚‹äººã«ã¯ã€ <em>Ruby ã§æ›¸ã„ãŸ SQL ã£ã½ã„ãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ã‚¤ãƒ³ã«è¦‹ãˆã‚‹</em> ã¨ã„ã†ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚‹(ã¨æ€ã†)ã€‚
    </section>
    <section>
      <h2 id="ç´°ã‹ã„ã¨ã“ã‚"><a href="#ç´°ã‹ã„ã¨ã“ã‚">ç´°ã‹ã„ã¨ã“ã‚</a></h2>
      <ul>
        <li>
          <code translate="no">selects</code> ã«ã—ãŸã®ã¯æ—¢ã« <code translate="no">select</code> ãŒ linux ã«ã‚ã‚‹ã‹ã‚‰ã€‚
        </li>
        <li>çµæœã®é ­ã«ãƒ˜ãƒƒãƒ€(åˆ—å)ã‚’å‡ºã—ã¦ãªã„ã®ã¯ã€ãƒ‘ã‚¤ãƒ—ã—ã‚„ã™ãã™ã‚‹ãŸã‚ã€‚
        <li>
          ãƒ‘ã‚¤ãƒ—å¾Œã® <code translate="no">cut</code> ã‚³ãƒãƒ³ãƒ‰ã¨ç›¸æ€§ãŒè‰¯ã„ã‚ˆã†ã«ã€åˆ—ã¯ã‚¿ãƒ–åŒºåˆ‡ã‚Šã«ã—ã¦ã„ã‚‹ã€‚
        </li>
        <li>
          <code translate="no">&#39;*&#39;</code>, <code translate="no">&#39;&lt;&#39;</code>,  <code translate="no">&#39;&gt;&#39;</code> ã¯ Shell ã§æ„å‘³ã‚’æŒã¤ã®ã§ã‚¯ã‚ªãƒ¼ãƒˆãŒå¿…è¦ã€‚
        </li>
        <li>
          Ruby ã® <code translate="no">File</code> ã¨ <code translate="no">File::Stat</code> ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã¹ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã‚‹ã€‚
        </li>
        <li>
          SQL ã‚ˆã‚Šã‚‚ Ruby ã«å¯„ã£ã¦ã‚‹ã®ã§æ›–æ˜§æ¤œç´¢ã¯ <code translate="no">like</code> ã§ã¯ãªã <code translate="no">where</code> ã§ <code translate="no">basename =~ &#39;.*foo.*&#39;</code> ãªã©ã™ã‚‹ã€‚
        </li>
        <li>SQL ã®ä»•æ§˜ã¯å°Šé‡ã—ã¤ã¤ã‚‚ã€æº–æ‹ ã‚ˆã‚Šã‚ãã¾ã§è£ã® Ruby ãŒé€ã‘ã¦è¦‹ãˆã‚‹ç¯„å›²ã§å®Ÿè£…ã—ãŸã„ã€‚
        <li>
          ã¾ã  <code translate="no">group by</code> ãªã©ã¯å¯¾å¿œã—ã¦ãªã„ãŒã€ãã®ãã‚‰ã„ã¯ã‚„ã£ã¦ã‚‚è‰¯ã„ã‹ãªã¨æ€ã£ã¦ã„ã‚‹ã€‚
        </li>
        <li>å‹•çš„ã«çµ„ã¿ç«‹ã¦ã¦å®Ÿè¡Œã—ã¦ã„ã‚‹ãŸã‚ã€ä¸Šæ‰‹ãã‚„ã‚Œã°ä»»æ„ã® Ruby ãŒå®Ÿè¡Œã§ãã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã€‚æ˜¯éæ¢ã—ã¦éŠã‚“ã§ã¿ã¦æ¬²ã—ã„ã€‚
      </ul>
    </section>
  </article>
</main>
<hr>
<footer>
  <p class=copyright><small>Copyright &copy; 2016 <a href=/>Jxck</a>. All Rights Reserved.</small> See <small><a href=/policies/site.html>Site Policy</a> and <a href=/policies/privacy.html>Privacy Policy</a>.</small></p>
  <amp-ad width=100vw height=320 type=adsense data-ad-client=ca-pub-2902784829138215 data-ad-slot=9735419796 data-auto-format=rspv data-full-width><div overflow></div></amp-ad>
</footer>
</body>
</html>
<amp-analytics type=googleanalytics id=analytics1>
<script type="application/json">
{
  "vars": {
    "account": "UA-15088753-7"
  },
  "triggers": {
    "trackPageview": {
      "on": "visible",
      "request": "pageview"
    }
  }
}
</script>
</amp-analytics>