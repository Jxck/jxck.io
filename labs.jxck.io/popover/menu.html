<!DOCTYPE html>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ“„</text></svg>" />
<title>Menu Popover DEMO</title>
<meta http-equiv="origin-trial" content="" />

<style>
  * {
    padding: 0;
    margin: 0;
  }

  li {
    list-style: none;
  }

  header {
    z-index: 1;
    position: sticky;
    top: 0;
    margin: 0;
    background-color: #333;
    box-sizing: border-box;

    button {
      background-color: transparent;
      border: none;
    }
  }

  button[popovertarget=menu] {
    anchor-name: --menu;
  }
  ul#menu {
    position-anchor: --menu;
    /* top: anchor(bottom);
    left: anchor(center);*/
    position-area: bottom span-right;
    translate: 10px;
  }
  [popovertarget=submenu] {
    anchor-name: --submenu;
  }
  ul#submenu {
    position-anchor: --submenu;
    position-area: right span-bottom;
    translate: 14px;
  }

  ul {
    border-radius: 4px;
    border: none;
    box-shadow: rgba(200, 200, 200, 0.5) 0px 0px 0px 1px;

    li[role=menuitem] {
      padding: 4px;

      button {
        padding-left: 0.5rem;
        width: 80px;
        height: 25px;
        background-color: #eee;
        border-radius: 4px;
        text-align: left;
      }
      button:hover {
        background-color: #ccc;
      }
    }
  }
</style>
<header>
  <nav>
    <ul>
      <li>
        <button popovertarget=menu>
          <img width="50" height="50" loading="eager" src="https://www.jxck.io/assets/img/menu.svg" title="menu" alt="menu" aria-label="menu"></a>
        </button>
        <ul id=menu role=menu popover>
          <li role=menuitem><button popovertarget=menu popovertargetaction=close autofocus>Save</button></li>
          <li role=menuitem>
            <button popovertarget=submenu popovertargetaction=show>Edit</button>
            <ul id=submenu role=menu popover>
              <li role=menuitem><button popovertarget=menu popovertargetaction=close autofocus>Cut</button></li>
              <li role=menuitem><button popovertarget=menu popovertargetaction=close>Copy</button></li>
              <li role=menuitem><button popovertarget=menu popovertargetaction=close>Paste</button></li>
            </ul>
          </li>
          <li role=menuitem><button popovertarget=menu popovertargetaction=close>Close</button></li>
        </ul>
      </li>
    </ul>
  </nav>
</header>

<script>
  'use strict';
  const $ = document.querySelector.bind(document)
  const $$ = document.querySelectorAll.bind(document)
  EventTarget.prototype.on = EventTarget.prototype.addEventListener
</script>