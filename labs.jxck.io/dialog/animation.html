<!DOCTYPE html>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Dialog Animation DEMO | labs.jxck.io</title>

<h1>Dialog Animation DEMO</h1>

<style>
  dialog {
    padding: 1rem;
    border: solid 4px red;
    background-color: pink;
    width: fit-content;
    align-content: center;
    text-align: center;

    display: none;
    opacity: 0;
  }


  .fade-in-transition {
    opacity: 1;
    display: block;
    transition: opacity 1s,
                overlay 1s allow-discrete,
                display 1s allow-discrete;

    @starting-style {
      opacity: 0;
    }
  }

  .fade-out-transition {
    opacity: 0;
    display: none;
    transition: opacity 1s,
                overlay 1s allow-discrete,
                display 1s allow-discrete;
  }


  .fade-in-animation {
    animation: fade-in-animation 1s forwards;
    display: block;
    @starting-style {
      opacity: 0;
    }
  }

  @keyframes fade-in-animation {
    100% {
      opacity: 1;
      display: block;
    }
  }

  .fade-out-animation {
    animation: fade-out-animation 1s forwards;
    @starting-style {
      opacity: 1;
    }
  }

  @keyframes fade-out-animation {
    100% {
      opacity: 0;
      display: none;
    }
  }
</style>

<button id="fade-in-transition">fade-in-transition</button>
<dialog class="transition">
  <p>Transition</p>
  <button id="fade-out-transition">fade-out-transition</button>
</dialog>

<button id="fade-in-animation">fade-in-animation</button>
<dialog class="animation">
  <p>Animation</p>
  <button id="fade-out-animation">fade-out-animation</button>
</dialog>

<script>
  const $ = document.querySelector.bind(document)
  const $$ = document.querySelectorAll.bind(document)
  EventTarget.prototype.on = EventTarget.prototype.addEventListener

  const $transition = $("dialog.transition")
  $("#fade-in-transition").on("click", () => {
    $transition.classList.remove("fade-out-transition")
    $transition.classList.add("fade-in-transition")
    $transition.showModal()
  })
  $("#fade-out-transition").on("click", (e) => {
    $transition.classList.remove("fade-in-transition")
    $transition.classList.add("fade-out-transition")
    $transition.close()
  })

  const $animation = $("dialog.animation")
  $("#fade-in-animation").on("click", () => {
    $animation.classList.remove("fade-out-animation")
    $animation.classList.add("fade-in-animation")
    $animation.showModal()
  })
  $("#fade-out-animation").on("click", () => {
    $animation.classList.remove("fade-in-animation")
    $animation.classList.add("fade-out-animation")
    $animation.close()
  })
</script>
